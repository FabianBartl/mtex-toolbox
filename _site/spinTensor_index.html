<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Spin Tensors | MTEX</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-mtex.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="mtex" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> MTEX Toolbox</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="download">Download</a></li>
                
                
                
                <li><a href="documentation">Documentation</a></li>
                
                
                
                <li><a href="function_reference">Function References</a></li>
                
                
                
                <li><a href="people">People</a></li>
                
                
                
                <li><a href="publications">Publications</a></li>
                
                
                
                <li><a href="support">Support</a></li>
                
                
                
                <li><a href="https://github.com/mtex-toolbox/mtex" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Spin Tensors">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">MTEX 5.1.0</li>
  
  
  
  <li>
      <a href="#">Tutorials</a>
      <ul>
          
          
          
          <li><a href="Contribute2Doc.html">MTEX Documentation Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="EBSDTutorial.html">EBSD Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="GrainTutorial.html">Grain Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="PoleFigureTutorial.html">Pole Figure Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="ODFTutorial.html">ODF Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="ImportFromVPSC.html">Import from VPSC</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">General Concepts</a>
      <ul>
          
          
          
          <li><a href="ListsAndIndexing.html">Lists and Indexing</a></li>
          
          
          
          
          
          
          <li><a href="Properties.html">Properties</a></li>
          
          
          
          
          
          
          <li><a href="vectors.html">Vectors</a></li>
          
          
          
          
          
          
          <li><a href="rotations.html">Rotations</a></li>
          
          
          
          
          
          
          <li><a href="DensityEstimation.html">Density Estimation</a></li>
          
          
          
          
          
          
          <li><a href="ClusterDemo.html">Cluster demo</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Plotting</a>
      <ul>
          
          
          
          <li><a href="AxesAlignment.html">Axes Alignment</a></li>
          
          
          
          
          
          
          <li><a href="multiplot.html">Multiplot</a></li>
          
          
          
          
          
          
          <li><a href="annotations.html">Annotations</a></li>
          
          
          
          
          
          
          <li><a href="export_plotting.html">Export</a></li>
          
          
          
          
          
          
          <li><a href="SphericalProjections.html">Spherical Projections</a></li>
          
          
          
          
          
          
          <li><a href="legends.html">Legends</a></li>
          
          
          
          
          
          
          <li><a href="colormaps.html">Colormaps</a></li>
          
          
          
          
          
          
          <li><a href="ContourPlotDemo.html">Contour Plot Demo</a></li>
          
          
          
          
          
          
          <li><a href="TransparencyDemo.html">Transparency demo</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Crystal Geometry</a>
      <ul>
          
          
          
          <li><a href="CrystalSymmetries.html">Crystal Symmetries</a></li>
          
          
          
          
          
          
          <li><a href="miller.html">Miller</a></li>
          
          
          
          
          
          
          <li><a href="FundamentalRegionMoraviecCell.html">Fundamental region/Moraviec cell</a></li>
          
          
          
          
          
          
          <li><a href="FundamentalSector.html">Fundamental Sector</a></li>
          
          
          
          
          
          
          <li><a href="CrystalReferenceSystem.html">Crystal Reference System</a></li>
          
          
          
          
          
          
          <li><a href="quasicrystals.html">Quasicrystal</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Misorientations</a>
      <ul>
          
          
          
          <li><a href="twinning.html">Twinning</a></li>
          
          
          
          
          
          
          <li><a href="MisorientationDistributionFunction.html">Misorientation Distribution Function</a></li>
          
          
          
          
          
          
          <li><a href="AxisDistributionFunction.html">Axis Distribution Function</a></li>
          
          
          
          
          
          
          <li><a href="AngleDistributionFunction.html">Angle Distribution Function</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">PhaseTransitions</a>
      <ul>
          
          
          
          <li><a href="ParentChildVariants.html">Parent/Child Variants</a></li>
          
          
          
          
          
          
          <li><a href="TransformationTexture.html">Transformation Texture</a></li>
          
          
          
          
          
          
          <li><a href="ParentGrainReconstruction.html">Partent Grain Reconstruction</a></li>
          
          
          
          
          
          
          <li><a href="GrainMerging.html">Grain Merging</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">ODF Analysis</a>
      <ul>
          
          
          
          <li><a href="ODFModeling.html">ODF Modeling</a></li>
          
          
          
          
          
          
          <li><a href="DetectionOfSampleSymmetry.html">Detection of Sample Symmetry</a></li>
          
          
          
          
          
          
          <li><a href="VisualizationOverview.html">Visualization - Overview</a></li>
          
          
          
          
          
          
          <li><a href="EulerAngleSections.html">Euler Angle Sections</a></li>
          
          
          
          
          
          
          <li><a href="SigmaSections.html">Sigma Sections</a></li>
          
          
          
          
          
          
          <li><a href="ODFCharacteristics.html">ODF Characteristics</a></li>
          
          
          
          
          
          
          <li><a href="UnimodalODFs.html">Unimodal ODFs</a></li>
          
          
          
          
          
          
          <li><a href="FibreODFs.html">Fibre ODFs</a></li>
          
          
          
          
          
          
          <li><a href="HarmonicODFs.html">Harmonic ODFs</a></li>
          
          
          
          
          
          
          <li><a href="DiscretizationError.html">Discretization Error</a></li>
          
          
          
          
          
          
          <li><a href="ImportExportODFAnalysis.html">Import/Export</a></li>
          
          
          
          
          
          
          <li><a href="DensityEstimation.html">Density Estimation</a></li>
          
          
          
          
          
          
          <li><a href="BinghamODFFitting.html">Bingham ODF Fitting</a></li>
          
          
          
          
          
          
          <li><a href="RandomSampling.html">Random Sampling</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Pole Figure Analysis</a>
      <ul>
          
          
          
          <li><a href="ImportExportPoleFigureAnalysis.html">Import/Export</a></li>
          
          
          
          
          
          
          <li><a href="DataCorrection.html">Data Correction</a></li>
          
          
          
          
          
          
          <li><a href="ODFReconstruction.html">ODF Reconstruction</a></li>
          
          
          
          
          
          
          <li><a href="TheAmbiguityProblem.html">The Ambiguity Problem</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">EBSD</a>
      <ul>
          
          
          
          <li><a href="ImportExportEBSD.html">Import/Export</a></li>
          
          
          
          
          
          
          <li><a href="ReferenceFrameAlignment.html">Reference Frame Alignment</a></li>
          
          
          
          
          
          
          <li><a href="DataPreprocessing.html">Data Preprocessing</a></li>
          
          
          
          
          
          
          <li><a href="denoising.html">Denoising</a></li>
          
          
          
          
          
          
          <li><a href="visualization.html">Visualization</a></li>
          
          
          
          
          
          
          <li><a href="KernelAverageMisorientationKAM.html">Kernel Average Misorientation KAM</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Grains</a>
      <ul>
          
          
          
          <li><a href="GrainReconstruction.html">Grain Reconstruction</a></li>
          
          
          
          
          
          
          <li><a href="ShapeParameters.html">Shape Parameters</a></li>
          
          
          
          
          
          
          <li><a href="OriantationDistributionParameters.html">Oriantation Distribution Parameters</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Grain Boundaries</a>
      <ul>
          
          
          
          <li><a href="GeometricProperties.html">Geometric Properties</a></li>
          
          
          
          
          
          
          <li><a href="TiltAndTwistBoundaries.html">Tilt and Twist Boundaries</a></li>
          
          
          
          
          
          
          <li><a href="SpecialBoundariesCSLTwinning.html">Special Boundaries CSL Twinning</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Tensors</a>
      <ul>
          
          
          
          <li><a href="TensorArithmetic.html">Tensor Arithmetic</a></li>
          
          
          
          
          
          
          <li><a href="AverageTensors.html">Average Tensors</a></li>
          
          
          
          
          
          
          <li><a href="piezoelectricity.html">Piezoelectricity</a></li>
          
          
          
          
          
          
          <li><a href="BirefringenceDemo.html">Birefringence</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Elasticity</a>
      <ul>
          
          
          
          <li><a href="WaveVelocities.html">Wave Velocities</a></li>
          
          
          
          
          
          
          <li><a href="IsotropicTheory.html">Isotropic Theory</a></li>
          
          
          
          
          
          
          <li><a href="SeismicPlots.html">Seismic Plots</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Plasticity</a>
      <ul>
          
          
          
          <li><a href="SchmidtFactor.html">Schmidt Factor</a></li>
          
          
          
          
          
          
          <li><a href="TaylorModel.html">Taylor Model</a></li>
          
          
          
          
          
          
          <li><a href="SachsModel.html">Sachs Model</a></li>
          
          
          
          
          
          
          <li><a href="SlipTransmission.html">Slip Transmission</a></li>
          
          
          
          
          
          
          <li><a href="GND.html">GND</a></li>
          
          
          
          
          
          
          <li><a href="TextureEvolution.html">Texture Evolution</a></li>
          
          
          
          
          
          
          <li><a href="TaylorHex.html">Texture evolution in rolled magnesium during uniaxial tension</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Spherical Functions</a>
      <ul>
          
          
          
          <li><a href="univariateS2Fun.html">univariate S2Fun</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Spin Tensors</h1>
</div>



<div class="post-content">

   

    


    

   <!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Spin Tensors</title><meta name="generator" content="MATLAB 9.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-03-20"><meta name="DC.source" content="script_spinTensor_index.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit spinTensor_index into the Matlab commandline">edit page</a></font><div><!--introduction--><!--/introduction--><h2 id="1">Spin Tensors as Ininitesimal Changes of Rotations</h2><p>Spin tensors are skew symmetric tensors that can be used to small rotational changes. Lets consider an arbitrary reference rotation</p><pre class="codeinput">rot_ref = rotation.byEuler(10*degree,20*degree,30*degree)
</pre><pre class="codeoutput"> 
rot_ref = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
  phi1  Phi phi2 Inv.
    10   20   30    0
 
</pre><p>and pertube it by a rotating about the axis (123) and angle delta. Since multiplication of rotations is not communatativ we have to distinguish between left and right pertubations</p><pre class="codeinput">delta = 0.01*degree;
rot_right = rotation.byAxisAngle(vector3d(1,2,3),delta) * rot_ref;
rot_left = rot_ref * rotation.byAxisAngle(vector3d(1,2,3),delta);
</pre><p>We may now ask for the first order Taylor coefficients of the pertubation as delta goes to zero which we find by the formula</p><p>$$ T = \lim_{\delta \to 0} \frac{\tilde R - R}{\delta}</p><pre class="codeinput">T_right = (rot_right.matrix - rot_ref.matrix)./delta
T_left = (rot_left.matrix - rot_ref.matrix)./delta
</pre><pre class="codeoutput">T_right =
   -0.4002   -0.4146    0.7724
    0.5727   -0.5873   -0.2035
   -0.2484    0.5297   -0.1218
T_left =
   -0.5399   -0.6025    0.5816
    0.7530   -0.5816    0.1368
   -0.2648    0.1140    0.0122
</pre><p>Both matrices <tt>T_right</tt> and <tt>T_left</tt> are elements of the tangential space attached to the reference rotation rot_ref. Those matrices are characterized by the fact that they becomes scew symmetric matrices when multiplied from the left or from the right with the inverse of the reference rotation</p><pre class="codeinput">S_right_L =  matrix(inv(rot_ref)) * T_right
S_right_R = T_right * matrix(inv(rot_ref))

S_left_L =  matrix(inv(rot_ref)) * T_left
S_left_R = T_left * matrix(inv(rot_ref))
</pre><pre class="codeoutput">S_right_L =
   -0.0000   -0.5892    0.4501
    0.5893   -0.0001   -0.6709
   -0.4501    0.6710   -0.0001
S_right_R =
   -0.0001   -0.8018    0.5345
    0.8018   -0.0001   -0.2672
   -0.5345    0.2673   -0.0000
S_left_L =
   -0.0001   -0.8018    0.5345
    0.8018   -0.0001   -0.2672
   -0.5345    0.2673   -0.0000
S_left_R =
   -0.0001   -0.9575    0.2758
    0.9575   -0.0001    0.0850
   -0.2758   -0.0850   -0.0000
</pre><p>A scew symmetric 3x3 matrix <tt>S</tt> is essentially determined by its entries 
  <img class="inline" src="images/script_spinTensor_index_eq14915280026360965098.png" alt="" />

, 
  <img class="inline" src="images/script_spinTensor_index_eq16890332314244088567.png" alt="" />

 and 
  <img class="inline" src="images/script_spinTensor_index_eq02767885496838317483.png" alt="" />

. Writing these values as a vector 
  <img class="inline" src="images/script_spinTensor_index_eq12578543884773640078.png" alt="" />

 we obtain for the matrices <tt>S_right_R</tt> and <tt>S_left_L</tt> exactly the rotational axis of our pertubation</p><pre class="codeinput">vector3d(spinTensor(S_right_R)) * sqrt(14)

vector3d(spinTensor(S_left_L))  *sqrt(14)
</pre><pre class="codeoutput"> 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
</pre><p>For the other two matrices those vectors are related to the rotatinal axis by the reference rotation <tt>rot_ref</tt></p><pre class="codeinput">rot_ref * vector3d(spinTensor(S_right_L)) * sqrt(14)

inv(rot_ref) * vector3d(spinTensor(S_left_R)) * sqrt(14)
</pre><pre class="codeoutput"> 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
</pre><h2 id="7">The Functions Exp and Log</h2><p>The above definition of the spin tensor works only well if the pertupation rotation has small rotational angle. For large pertubations the matrix logarithm</p><pre class="codeinput"><span class="comment">% Given a reference rotation rot_ref and a spin vector |s| one could ask</span>
<span class="comment">% for the rotation that is obtained by applying the inifitimal change s to</span>
<span class="comment">% to rot_ref</span>


rot_123 = rotation.byAxisAngle(vector3d(1,2,3),1)
log(rot_ref * rot_123,rot_ref) * sqrt(14)

log(rot_123 * rot_ref,rot_ref,<span class="string">'left'</span>) * sqrt(14)
</pre><pre class="codeoutput"> 
rot_123 = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  87.0892 33.2984 320.219       0
 
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
</pre><h2 id="8">logarithm to skew symmetric matrix</h2><pre class="codeinput">S = logm(rot_ref * rot_123,rot_ref)

vector3d(S) * sqrt(14)

S = logm(rot_123 * rot_ref,rot_ref,<span class="string">'left'</span>)
vector3d(S) * sqrt(14)
</pre><pre class="codeoutput"> 
S = spinTensor  
  rank: 2 (3 x 3)
 
 *10^-2
      0 -80.18  53.45
  80.18      0 -26.73
 -53.45  26.73      0
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
 
S = spinTensor  
  rank: 2 (3 x 3)
 
 *10^-2
      0 -80.18  53.45
  80.18      0 -26.73
 -53.45  26.73      0
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
</pre><h2 id="9">The other way round</h2><pre class="codeinput">S = logm(rot_ref * rot_123,rot_ref);
rot_ref * rot_123
exp(S,rot_ref)

v = log(rot_ref * rot_123,rot_ref);
exp(v,rot_ref)
</pre><pre class="codeoutput"> 
ans = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  94.0497 29.4341 358.508       0
 
 
ans = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  94.0497 29.4341 358.508       0
 
 
ans = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2
  94.0497 29.4341 358.508
 
</pre><pre class="codeinput">S = logm(rot_123 * rot_ref,rot_ref,<span class="string">'left'</span>);
rot_123 * rot_ref
exp(S,rot_ref,<span class="string">'left'</span>)

v = log(rot_123 * rot_ref,rot_ref,<span class="string">'left'</span>);
exp(v,rot_ref,<span class="string">'left'</span>)
</pre><pre class="codeoutput"> 
ans = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  74.5535 51.5051 9.61062       0
 
 
ans = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  74.5535 51.5051 9.61062       0
 
 
ans = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2
  74.5535 51.5051 9.61062
 
</pre><h2 id="11">Now the same with orientations</h2><pre class="codeinput">cs = crystalSymmetry(<span class="string">'321'</span>)

<span class="comment">% consider an arbitrary rotation</span>
ori_ref = orientation.byEuler(10*degree,20*degree,30*degree,cs)

<span class="comment">% next we disturb rot_ref by a rotation about the axis (123)</span>
mori_123 = orientation.byAxisAngle(Miller(1,2,-3,3,cs),1)

<span class="comment">% first we multiply from the right</span>
ori = ori_ref * mori_123;
</pre><pre class="codeoutput"> 
cs = crystalSymmetry  
 
  symmetry       : 321               
  a, b, c        : 1, 1, 1           
  reference frame: X||a*, Y||b, Z||c*
 
 
ori_ref = orientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  specimen symmetry: 1
 
  Bunge Euler angles in degree
  phi1  Phi phi2 Inv.
    10   20   30    0
 
 
mori_123 = misorientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  crystal symmetry : 321, X||a*, Y||b, Z||c*
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  61.8386 40.0064 340.052       0
 
</pre><pre class="codeinput">S_right_L =  matrix(inv(rot_ref)) * T_right
S_right_R = T_right * matrix(inv(rot_ref))

S_left_L =  matrix(inv(rot_ref)) * T_left
S_left_R = T_left * matrix(inv(rot_ref))
</pre><pre class="codeoutput">S_right_L =
   -0.0000   -0.5892    0.4501
    0.5893   -0.0001   -0.6709
   -0.4501    0.6710   -0.0001
S_right_R =
   -0.0001   -0.8018    0.5345
    0.8018   -0.0001   -0.2672
   -0.5345    0.2673   -0.0000
S_left_L =
   -0.0001   -0.8018    0.5345
    0.8018   -0.0001   -0.2672
   -0.5345    0.2673   -0.0000
S_left_R =
   -0.0001   -0.9575    0.2758
    0.9575   -0.0001    0.0850
   -0.2758   -0.0850   -0.0000
</pre><h2 id="13">make it a vector</h2><pre class="codeinput">vR1 = vector3d(spinTensor(S_right_L))  *sqrt(14)
vR2 = inv(rot_ref) * vector3d(spinTensor(S_right_R)) * sqrt(14)

lR1 = rot_ref * vector3d(spinTensor(S_left_L))  *sqrt(14)
lR2 = vector3d(spinTensor(S_left_R)) * sqrt(14)
</pre><pre class="codeoutput"> 
vR1 = vector3d  
 size: 1 x 1
        x       y       z
  2.51049  1.6841 2.20482
 
vR2 = vector3d  
 size: 1 x 1
        x       y       z
  2.51049  1.6841 2.20482
 
lR1 = vector3d  
 size: 1 x 1
          x         y         z
  -0.317983   1.03184   3.58248
 
lR2 = vector3d  
 size: 1 x 1
          x         y         z
  -0.317983   1.03184   3.58248
</pre><h2 id="14">logarithm to vector3d</h2><pre class="codeinput">log(ori_ref * mori_123,ori_ref)

log(rot_123 * ori_ref,ori_ref,<span class="string">'left'</span>) * sqrt(14)
</pre><pre class="codeoutput"> 
ans = Miller  
 size: 1 x 1
 symmetry: 321, X||a*, Y||b, Z||c*
  h  0.2335
  k  0.4671
  i -0.7006
  l  0.7006
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
</pre><h2 id="15">logarithm to skew symmetric matrix</h2><pre class="codeinput">S = logm(ori_ref * mori_123,ori_ref)
round(vector3d(S))

S = logm(rot_123 * ori_ref,ori_ref,<span class="string">'left'</span>)
vector3d(S) * sqrt(14)
</pre><pre class="codeoutput"> 
S = spinTensor  
  rank   : 2 (3 x 3)              
  mineral: 321, X||a*, Y||b, Z||c*
 
 *10^-2
      0 -70.06  46.71
  70.06      0 -53.94
 -46.71  53.94      0
 
ans = Miller  
 size: 1 x 1
 symmetry: 321, X||a*, Y||b, Z||c*
  h  1
  k  2
  i -3
  l  3
 
S = spinTensor  
  rank: 2 (3 x 3)
 
 *10^-2
      0 -80.18  53.45
  80.18      0 -26.73
 -53.45  26.73      0
 
ans = vector3d  
 size: 1 x 1
  x y z
  1 2 3
</pre><h2 id="16">The other way round</h2><pre class="codeinput">S = logm(ori_ref * mori_123,ori_ref);
ori_ref * mori_123
exp(S,ori_ref)

v = log(ori_ref * mori_123,ori_ref);
exp(v,ori_ref)
</pre><pre class="codeoutput"> 
ans = orientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  79.3156 43.3785  9.9013       0
 
 
ans = orientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  79.3156 43.3785  9.9013       0
 
 
ans = orientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  79.3156 43.3785  9.9013       0
 
</pre><pre class="codeinput">S = logm(rot_123 * ori_ref,ori_ref,<span class="string">'left'</span>);
rot_123 * ori_ref
exp(S,ori_ref,<span class="string">'left'</span>)

v = log(rot_123 * ori_ref,ori_ref,<span class="string">'left'</span>);
exp(v,ori_ref,<span class="string">'left'</span>)
</pre><pre class="codeoutput"> 
ans = orientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  74.5535 51.5051 9.61062       0
 
 
ans = orientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  74.5535 51.5051 9.61062       0
 
 
ans = orientation  
  size: 1 x 1
  crystal symmetry : 321, X||a*, Y||b, Z||c*
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2
  74.5535 51.5051 9.61062
 
</pre><pre class="codeinput">v = vector3d.rand(100);
v.x = 0;
v = rotation.rand * v + vector3d.rand;

vsave = v;
</pre><pre class="codeinput">s = v(1);

<span class="comment">% shift to origin</span>
v = v - s;

<span class="comment">% compute normal vector</span>
[n,~] = eig3(v*v);


r = rotation.map(n(1),zvector);

v = r * v;

plot3(v.x,v.y,v.z,<span class="string">'.'</span>)
</pre>
  <img class="inline" src="images/script_spinTensor_index_01.png" alt="" />

<pre class="codeinput">P = [v.x(:),v.y(:)];
T = delaunayn(P);
n = size(T,1);
W = zeros(n,1);
C=0;
<span class="keyword">for</span> m = 1:n
    sp = P(T(m,:),:);
    [null,W(m)]=convhulln(sp);
    C = C + W(m) * mean(sp);
<span class="keyword">end</span>

C = vector3d(C(1),C(2),0)./sum(W);
</pre><pre class="codeinput">hold <span class="string">on</span>
plot3(C.x,C.y,C.z,<span class="string">'MarkerSize'</span>,10)
hold <span class="string">off</span>




<span class="keyword">function</span> test
  <span class="comment">% some testing code</span>

  cs = crystalSymmetry(<span class="string">'321'</span>);
  ori1 = orientation.rand(cs);
  ori2 = orientation.rand(cs);

  v = log(ori2,ori1);

  <span class="comment">% this should be the same</span>
  [norm(v),angle(ori1,ori2)] ./ degree

  <span class="comment">% and this too</span>
  [ori1 * orientation.byAxisAngle(v,norm(v)) ,project2FundamentalRegion(ori2,ori1)]

  <span class="comment">% in specimen coordinates</span>
  r = log(ori2,ori1,<span class="string">'left'</span>);

  <span class="comment">% now we have to multiply from the left</span>
  [rotation.byAxisAngle(r,norm(v)) * ori1 ,project2FundamentalRegion(ori2,ori1)]

  <span class="comment">% the following output should be constant</span>
  <span class="comment">% gO = log(ori1,ori2.symmetrise) % but not true for this</span>
  <span class="comment">% gO = log(ori1.symmetrise,ori2) % true for this</span>
  <span class="comment">%</span>
  <span class="comment">% gO = ori2.symmetrise .* log(ori1,ori2.symmetrise) % true for this</span>
  <span class="comment">% gO = ori2 .* log(ori1.symmetrise,ori2) % true for this</span>

<span class="keyword">end</span>
</pre>
  <img class="inline" src="images/script_spinTensor_index_02.png" alt="" />

<h2 id="22">Complete Function list</h2><p><table width="90%"><tr><td width="200px"><a href="spinTensor.spinTensor.html"><tt>spinTensor</tt></a></td><td>Syntax</td></tr></table></p></div></body></html>

    <div class="tags">
        
    </div>




</div>



<footer>
<div class="row">
<div class="col-lg-12 footer">
<p><img src="images/company_logo.png" alt="Company logo"/></p>
</div>
</div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
