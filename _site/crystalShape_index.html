<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Crystal Shapes (The Class [[crystalShape_index.html,crystalShape]]) | MTEX</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-mtex.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="mtex" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> MTEX Toolbox</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="download">Download</a></li>
                
                
                
                <li><a href="documentation">Documentation</a></li>
                
                
                
                <li><a href="function_reference">Function References</a></li>
                
                
                
                <li><a href="people">People</a></li>
                
                
                
                <li><a href="publications">Publications</a></li>
                
                
                
                <li><a href="support">Support</a></li>
                
                
                
                <li><a href="https://github.com/mtex-toolbox/mtex" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Crystal Shapes (The Class [[crystalShape_index.html,crystalShape]])">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">MTEX 5.1.0</li>
  
  
  
  <li>
      <a href="#">Tutorials</a>
      <ul>
          
          
          
          <li><a href="Contribute2Doc.html">MTEX Documentation Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="EBSDTutorial.html">EBSD Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="GrainTutorial.html">Grain Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="PoleFigureTutorial.html">Pole Figure Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="ODFTutorial.html">ODF Tutorial</a></li>
          
          
          
          
          
          
          <li><a href="ImportFromVPSC.html">Import from VPSC</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">General Concepts</a>
      <ul>
          
          
          
          <li><a href="ListsAndIndexing.html">Lists and Indexing</a></li>
          
          
          
          
          
          
          <li><a href="Properties.html">Properties</a></li>
          
          
          
          
          
          
          <li><a href="vectors.html">Vectors</a></li>
          
          
          
          
          
          
          <li><a href="rotations.html">Rotations</a></li>
          
          
          
          
          
          
          <li><a href="DensityEstimation.html">Density Estimation</a></li>
          
          
          
          
          
          
          <li><a href="ClusterDemo.html">Cluster demo</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Plotting</a>
      <ul>
          
          
          
          <li><a href="AxesAlignment.html">Axes Alignment</a></li>
          
          
          
          
          
          
          <li><a href="multiplot.html">Multiplot</a></li>
          
          
          
          
          
          
          <li><a href="annotations.html">Annotations</a></li>
          
          
          
          
          
          
          <li><a href="export_plotting.html">Export</a></li>
          
          
          
          
          
          
          <li><a href="SphericalProjections.html">Spherical Projections</a></li>
          
          
          
          
          
          
          <li><a href="legends.html">Legends</a></li>
          
          
          
          
          
          
          <li><a href="colormaps.html">Colormaps</a></li>
          
          
          
          
          
          
          <li><a href="ContourPlotDemo.html">Contour Plot Demo</a></li>
          
          
          
          
          
          
          <li><a href="TransparencyDemo.html">Transparency demo</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Crystal Geometry</a>
      <ul>
          
          
          
          <li><a href="CrystalSymmetries.html">Crystal Symmetries</a></li>
          
          
          
          
          
          
          <li><a href="miller.html">Miller</a></li>
          
          
          
          
          
          
          <li><a href="FundamentalRegionMoraviecCell.html">Fundamental region/Moraviec cell</a></li>
          
          
          
          
          
          
          <li><a href="FundamentalSector.html">Fundamental Sector</a></li>
          
          
          
          
          
          
          <li><a href="CrystalReferenceSystem.html">Crystal Reference System</a></li>
          
          
          
          
          
          
          <li><a href="quasicrystals.html">Quasicrystal</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Misorientations</a>
      <ul>
          
          
          
          <li><a href="twinning.html">Twinning</a></li>
          
          
          
          
          
          
          <li><a href="MisorientationDistributionFunction.html">Misorientation Distribution Function</a></li>
          
          
          
          
          
          
          <li><a href="AxisDistributionFunction.html">Axis Distribution Function</a></li>
          
          
          
          
          
          
          <li><a href="AngleDistributionFunction.html">Angle Distribution Function</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">PhaseTransitions</a>
      <ul>
          
          
          
          <li><a href="ParentChildVariants.html">Parent/Child Variants</a></li>
          
          
          
          
          
          
          <li><a href="TransformationTexture.html">Transformation Texture</a></li>
          
          
          
          
          
          
          <li><a href="ParentGrainReconstruction.html">Partent Grain Reconstruction</a></li>
          
          
          
          
          
          
          <li><a href="GrainMerging.html">Grain Merging</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">ODF Analysis</a>
      <ul>
          
          
          
          <li><a href="ODFModeling.html">ODF Modeling</a></li>
          
          
          
          
          
          
          <li><a href="DetectionOfSampleSymmetry.html">Detection of Sample Symmetry</a></li>
          
          
          
          
          
          
          <li><a href="VisualizationOverview.html">Visualization - Overview</a></li>
          
          
          
          
          
          
          <li><a href="EulerAngleSections.html">Euler Angle Sections</a></li>
          
          
          
          
          
          
          <li><a href="SigmaSections.html">Sigma Sections</a></li>
          
          
          
          
          
          
          <li><a href="ODFCharacteristics.html">ODF Characteristics</a></li>
          
          
          
          
          
          
          <li><a href="UnimodalODFs.html">Unimodal ODFs</a></li>
          
          
          
          
          
          
          <li><a href="FibreODFs.html">Fibre ODFs</a></li>
          
          
          
          
          
          
          <li><a href="HarmonicODFs.html">Harmonic ODFs</a></li>
          
          
          
          
          
          
          <li><a href="DiscretizationError.html">Discretization Error</a></li>
          
          
          
          
          
          
          <li><a href="ImportExportODFAnalysis.html">Import/Export</a></li>
          
          
          
          
          
          
          <li><a href="DensityEstimation.html">Density Estimation</a></li>
          
          
          
          
          
          
          <li><a href="BinghamODFFitting.html">Bingham ODF Fitting</a></li>
          
          
          
          
          
          
          <li><a href="RandomSampling.html">Random Sampling</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Pole Figure Analysis</a>
      <ul>
          
          
          
          <li><a href="ImportExportPoleFigureAnalysis.html">Import/Export</a></li>
          
          
          
          
          
          
          <li><a href="DataCorrection.html">Data Correction</a></li>
          
          
          
          
          
          
          <li><a href="ODFReconstruction.html">ODF Reconstruction</a></li>
          
          
          
          
          
          
          <li><a href="TheAmbiguityProblem.html">The Ambiguity Problem</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">EBSD</a>
      <ul>
          
          
          
          <li><a href="ImportExportEBSD.html">Import/Export</a></li>
          
          
          
          
          
          
          <li><a href="ReferenceFrameAlignment.html">Reference Frame Alignment</a></li>
          
          
          
          
          
          
          <li><a href="DataPreprocessing.html">Data Preprocessing</a></li>
          
          
          
          
          
          
          <li><a href="denoising.html">Denoising</a></li>
          
          
          
          
          
          
          <li><a href="visualization.html">Visualization</a></li>
          
          
          
          
          
          
          <li><a href="KernelAverageMisorientationKAM.html">Kernel Average Misorientation KAM</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Grains</a>
      <ul>
          
          
          
          <li><a href="GrainReconstruction.html">Grain Reconstruction</a></li>
          
          
          
          
          
          
          <li><a href="ShapeParameters.html">Shape Parameters</a></li>
          
          
          
          
          
          
          <li><a href="OriantationDistributionParameters.html">Oriantation Distribution Parameters</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Grain Boundaries</a>
      <ul>
          
          
          
          <li><a href="GeometricProperties.html">Geometric Properties</a></li>
          
          
          
          
          
          
          <li><a href="TiltAndTwistBoundaries.html">Tilt and Twist Boundaries</a></li>
          
          
          
          
          
          
          <li><a href="SpecialBoundariesCSLTwinning.html">Special Boundaries CSL Twinning</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Tensors</a>
      <ul>
          
          
          
          <li><a href="TensorArithmetic.html">Tensor Arithmetic</a></li>
          
          
          
          
          
          
          <li><a href="AverageTensors.html">Average Tensors</a></li>
          
          
          
          
          
          
          <li><a href="piezoelectricity.html">Piezoelectricity</a></li>
          
          
          
          
          
          
          <li><a href="BirefringenceDemo.html">Birefringence</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Elasticity</a>
      <ul>
          
          
          
          <li><a href="WaveVelocities.html">Wave Velocities</a></li>
          
          
          
          
          
          
          <li><a href="IsotropicTheory.html">Isotropic Theory</a></li>
          
          
          
          
          
          
          <li><a href="SeismicPlots.html">Seismic Plots</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Plasticity</a>
      <ul>
          
          
          
          <li><a href="SchmidtFactor.html">Schmidt Factor</a></li>
          
          
          
          
          
          
          <li><a href="TaylorModel.html">Taylor Model</a></li>
          
          
          
          
          
          
          <li><a href="SachsModel.html">Sachs Model</a></li>
          
          
          
          
          
          
          <li><a href="SlipTransmission.html">Slip Transmission</a></li>
          
          
          
          
          
          
          <li><a href="GND.html">GND</a></li>
          
          
          
          
          
          
          <li><a href="TextureEvolution.html">Texture Evolution</a></li>
          
          
          
          
          
          
          <li><a href="TaylorHex.html">Texture evolution in rolled magnesium during uniaxial tension</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Spherical Functions</a>
      <ul>
          
          
          
          <li><a href="univariateS2Fun.html">univariate S2Fun</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Crystal Shapes (The Class [[crystalShape_index.html,crystalShape]])</h1>
</div>



<div class="post-content">

   

    


    

   <!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Crystal Shapes (The Class [[crystalShape_index.html,crystalShape]])</title><meta name="generator" content="MATLAB 9.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-03-20"><meta name="DC.source" content="script_crystalShape_index.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit crystalShape_index into the Matlab commandline">edit page</a></font><div><!--introduction--><p>How to draw threedimensional representations of crystals.</p><!--/introduction--><h2 id="1">Open in Editor</h2><h2 id="2">Contents</h2><h2 id="3">Simple Crystal Shapes</h2><p>In the case of cubic or hexagonal materials the corresponding crystal are often represented as cubes or hexagons, where the faces correspond to the lattice planes {100} in the cubic case and {1,0,-1,0},{0,0,0,1} in the hexagonal case. Such simplifies crystal shapes may be created in MTEX with the commands</p><pre class="codeinput"><span class="comment">% import some hexagonal data</span>
mtexdata <span class="string">titanium</span>;

<span class="comment">% define a simple hexagonal crystal shape</span>
cS = crystalShape.hex(ebsd.CS)

<span class="comment">% and plot it</span>
close <span class="string">all</span>
plot(cS)
</pre><pre class="codeoutput"> 
cS = crystalShape  
 mineral: Titanium (Alpha) (622, X||a, Y||b*, Z||c)
 vertices: 12
 faces: 8
</pre>
  <img class="inline" src="images/script_crystalShape_index_01.png" alt="" />

<p>Internally, a crystal shape is represented as a list of faces which are bounded by a list of vertices</p><pre class="codeinput">cS.V
</pre><pre class="codeoutput"> 
ans = vector3d  
 size: 12 x 1
          x         y         z
  -0.393614         0 -0.308331
  -0.393614         0  0.308331
  -0.196807  -0.34088  0.308331
  -0.196807   0.34088 -0.308331
  -0.196807  -0.34088 -0.308331
  -0.196807   0.34088  0.308331
   0.196807  -0.34088  0.308331
   0.196807   0.34088 -0.308331
   0.196807  -0.34088 -0.308331
   0.196807   0.34088  0.308331
   0.393614         0 -0.308331
   0.393614         0  0.308331
</pre><h2 id="5">Calculating with crystal shapes</h2><p>Crystal shapes are defined in crystal coordinates. Thus applying an orientation rotates them into specimen coordinates. This functionality can be used to visualize crystal orientations in EBSD maps</p><pre class="codeinput"><span class="comment">% plot an EBSD map</span>
clf <span class="comment">% clear current figure</span>
plot(ebsd,ebsd.orientations)

hold <span class="string">on</span>
scaling = 100; <span class="comment">% scale the crystal shape to have a nice size</span>

<span class="comment">% plot at position (500,500) the orientatation of the corresponding crystal</span>
plot(500,500,50, ebsd(500,500).orientations * cS * scaling)
hold <span class="string">off</span>
</pre>
  <img class="inline" src="images/script_crystalShape_index_02.png" alt="" />

<p>As we have seen in the previous section we can apply several operations on crystal shapes. These include</p><div><ul><li><tt>factor * cS</tt> scales the crystal shape in size</li><li><tt>ori * cS</tt> rotates the crystal shape in the defined orientation</li><li><tt>[xy] + cS</tt> or <tt>[xyz] + cS</tt> shifts the crystal shape in the specified positions</li></ul></div><p>At this point it comes into help that MTEX supports lists of crystal shapes, i.e., whenever one of the operations listed above includes a list (e.g. a list of orientations) the multiplication will yield a list of crystal shapes. Lets illustrate this</p><pre class="codeinput"><span class="comment">% compute some grains</span>
grains = calcGrains(ebsd);
grains = smooth(grains,5);

<span class="comment">% and plot them</span>
plot(grains,grains.meanOrientation)

<span class="comment">% find the big ones</span>
isBig = grains.grainSize&gt;50;

<span class="comment">% define a list of crystal shape that is oriented as the grain mean</span>
<span class="comment">% orientation and scaled according to their area</span>
cSGrains = grains(isBig).meanOrientation * cS * 0.7 * sqrt(grains(isBig).area);

<span class="comment">% now we can plot these crystal shapes at the grain centers</span>
hold <span class="string">on</span>
plot(grains(isBig).centroid + cSGrains)
hold <span class="string">off</span>
</pre><pre class="codeoutput">  I'm going to colorize the orientation data with the 
  standard MTEX colorkey. To view the colorkey do:
 
  oM = ipfColorKey(ori_variable_name)
  plot(oM)
</pre>
  <img class="inline" src="images/script_crystalShape_index_03.png" alt="" />

<h2 id="7">Plotting crystal shapes</h2><p>The above can be accomplished a bit more directly and a bit more nice with</p><pre class="codeinput"><span class="comment">% plot a grain map</span>
plot(grains,grains.meanOrientation)

<span class="comment">% and on top for each large grain a crystal shape</span>
hold <span class="string">on</span>
plot(grains(isBig),0.7*cS)
hold <span class="string">off</span>
</pre><pre class="codeoutput">  I'm going to colorize the orientation data with the 
  standard MTEX colorkey. To view the colorkey do:
 
  oM = ipfColorKey(ori_variable_name)
  plot(oM)
</pre>
  <img class="inline" src="images/script_crystalShape_index_04.png" alt="" />

<p>In the same manner we may visualize grain orientations and grains size within pole figures</p><pre class="codeinput">plotPDF(grains(isBig).meanOrientation,Miller({1,0,-1,0},{0,0,0,1},ebsd.CS),<span class="string">'contour'</span>)
plot(grains(isBig).meanOrientation,0.002*cSGrains,<span class="string">'add2all'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_05.png" alt="" />

<p>or even within ODF sections</p><pre class="codeinput"><span class="comment">% compute the odf</span>
odf = calcODF(ebsd.orientations);

<span class="comment">% plot the odf in sigma sections</span>
plotSection(odf,<span class="string">'sigma'</span>,<span class="string">'contour'</span>)

<span class="comment">% and on top of it the crystal shapes</span>
plot(grains(isBig).meanOrientation,0.002*cSGrains,<span class="string">'add2all'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_06.png" alt="" />

<h2 id="10">Twinning relationships</h2><p>We may also you crystal shapes to illustrate twinning relation ships</p><pre class="codeinput"><span class="comment">% define some twinning misorientation</span>
mori = orientation.byAxisAngle(Miller({1 0-1 0},ebsd.CS),34.9*degree)

<span class="comment">% plot the crystal in ideal orientation</span>
close <span class="string">all</span>
plot(cS,<span class="string">'FaceAlpha'</span>,0.5)

<span class="comment">% and on top of it in twinning orientation</span>
hold <span class="string">on</span>
plot(mori * cS *0.9,<span class="string">'FaceColor'</span>,<span class="string">'r'</span>)
hold <span class="string">off</span>
view(45,20)
</pre><pre class="codeoutput"> 
mori = misorientation  
  size: 1 x 1
  crystal symmetry : Titanium (Alpha) (622, X||a, Y||b*, Z||c)
  crystal symmetry : Titanium (Alpha) (622, X||a, Y||b*, Z||c)
 
  Bunge Euler angles in degree
  phi1  Phi phi2 Inv.
   330 34.9   30    0
 
</pre>
  <img class="inline" src="images/script_crystalShape_index_07.png" alt="" />

<h2 id="11">Defining complicated crystal shapes</h2><p>For symmetries other then hexagonal or cubic one would like to have more complicated crystal shape representing the true appearance. To this end one has to include more faces into the representation and carefuly adjust their distance to the origin.</p><p>Lets consider a quartz crystal.</p><pre class="codeinput">cs = loadCIF(<span class="string">'quartz'</span>)
</pre><pre class="codeoutput"> 
cs = crystalSymmetry  
 
  mineral        : Quartz            
  symmetry       : 321               
  a, b, c        : 4.9, 4.9, 5.4     
  reference frame: X||a*, Y||b, Z||c*
 
</pre><p>Its shape is mainly bounded by the following faces</p><pre class="codeinput">m = Miller({1,0,-1,0},cs);  <span class="comment">% hexagonal prism</span>
r = Miller({1,0,-1,1},cs);  <span class="comment">% positive rhomboedron, usally bigger then z</span>
z = Miller({0,1,-1,1},cs);  <span class="comment">% negative rhomboedron</span>
s1 = Miller({2,-1,-1,1},cs);<span class="comment">% left tridiagonal bipyramid</span>
s2 = Miller({1,1,-2,1},cs); <span class="comment">% right tridiagonal bipyramid</span>
x1 = Miller({6,-1,-5,1},cs);<span class="comment">% left positive Trapezohedron</span>
x2 = Miller({5,1,-6,1},cs); <span class="comment">% right positive Trapezohedron</span>
</pre><p>If we take only the first three faces we end up with</p><pre class="codeinput">N = [m,r,z];
cS = crystalShape(N)

plot(cS)
</pre><pre class="codeoutput"> 
cS = crystalShape  
 mineral: Quartz (321, X||a*, Y||b, Z||c*)
 vertices: 8
 faces: 18
</pre>
  <img class="inline" src="images/script_crystalShape_index_08.png" alt="" />

<p>i.e. we see only  the possitive and negative rhomboedrons, but the hexagonal prism are to far away from the origin to cut the shape. We may decrease the distance, by multiplying the coresponding normal with a factor larger then 1.</p><pre class="codeinput">N = [2*m,r,z];

cS = crystalShape(N);
plot(cS)
</pre>
  <img class="inline" src="images/script_crystalShape_index_09.png" alt="" />

<p>Next in a typical Quartz crystal the negativ rhomboedron is a bit smaller then the positiv rhomboedron. Lets correct for this.</p><pre class="codeinput"><span class="comment">% collect the face normal with the right scalling</span>
N = [2*m,r,0.9*z];

cS = crystalShape(N);
plot(cS)
</pre>
  <img class="inline" src="images/script_crystalShape_index_10.png" alt="" />

<p>Finaly, we add the tridiagonal bipyramid and the positive Trapezohedron</p><pre class="codeinput"><span class="comment">% collect the face normal with the right scalling</span>
N = [2*m,r,0.9*z,0.7*s1,0.3*x1];

cS = crystalShape(N);
plot(cS)
</pre>
  <img class="inline" src="images/script_crystalShape_index_11.png" alt="" />

<h2 id="18">Marking crystal faces</h2><p>We may colorize the faces according to their lattice planes using the command</p><pre class="codeinput">plot(cS,<span class="string">'colored'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_12.png" alt="" />

<p>or even label the faces directly</p><pre class="codeinput">plot(cS)
N = unique(cS.N.symmetrise,<span class="string">'noSymmetry'</span>,<span class="string">'stable'</span>);
fC = cS.faceCenter;

<span class="keyword">for</span> i = 1:length(N)
  text3(fC(i),char(round(N(i)),<span class="string">'latex'</span>),<span class="string">'scaling'</span>,1.1,<span class="string">'interpreter'</span>,<span class="string">'latex'</span>)
<span class="keyword">end</span>
</pre>
  <img class="inline" src="images/script_crystalShape_index_13.png" alt="" />

<h2 id="20">Defining complicated crystals more simple</h2><p>We see that defining a complicated crystal shape is a tedious work. To this end MTEX allows to model the shape with a habitus and a extension parameter. This approach has been developed by J&#65533;rg Enderlein in <tt>Enderlein, J., 1997. A package for displaying crystal morphology. Mathematica Journal, 7(1).</tt> The two paraters are used to model the distance of a phase from the origin. Setting all parameters to one we obtain</p><pre class="codeinput"><span class="comment">% take the face normals unscaled</span>
N = [m,r,z,s2,x2];

habitus = 1;
extension = [1 1 1];
cS = crystalShape(N,habitus,extension);
plot(cS,<span class="string">'colored'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_14.png" alt="" />

<p>The scale parameter models the inverse extension of the crystal in each dimension. In order to make the crystal a bit longer and the negative rhomboedrons smaller we could do</p><pre class="codeinput">extension = [0.9 1.1 1];
cS = crystalShape(N,habitus,extension);
plot(cS,<span class="string">'colored'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_15.png" alt="" />

<p>Next the habitus parameter describes how close faces with mixed hkl are to the origin. If we increase the habitus parameter the trapezohedron and the bipyramid become more and more dominant</p><pre class="codeinput">habitus = 1.1;
cS = crystalShape(N,habitus,extension);
plot(cS,<span class="string">'colored'</span>), snapnow

habitus = 1.2;
cS = crystalShape(N,habitus,extension);
plot(cS,<span class="string">'colored'</span>), snapnow

habitus = 1.3;
cS = crystalShape(N,habitus,extension);
plot(cS,<span class="string">'colored'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_16.png" alt="" />


  <img class="inline" src="images/script_crystalShape_index_17.png" alt="" />


  <img class="inline" src="images/script_crystalShape_index_18.png" alt="" />

<h2 id="23">Select Faces</h2><h2 id="24">Gallery of hardcoded crystal shapes</h2><pre class="codeinput">plot(crystalShape.olivine,<span class="string">'colored'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_19.png" alt="" />

<pre class="codeinput">plot(crystalShape.garnet,<span class="string">'colored'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_20.png" alt="" />

<pre class="codeinput">plot(crystalShape.topaz,<span class="string">'colored'</span>)
</pre>
  <img class="inline" src="images/script_crystalShape_index_21.png" alt="" />

<h2 id="27">Complete Function list</h2><p><table width="90%"><tr><td width="200px"><a href="crystalShape.crystalShape.html"><tt>crystalShape</tt></a></td><td>a class representing crystal shapes.</td></tr><tr><td width="200px"><a href="crystalShape.display.html"><tt>display</tt></a></td><td>standard output</td></tr><tr><td width="200px"><a href="crystalShape.fitArea.html"><tt>fitArea</tt></a></td><td>change habitus of crystal shape to fit given faceAreas</td></tr><tr><td width="200px"><a href="crystalShape.length.html"><tt>length</tt></a></td><td>overloads length</td></tr><tr><td width="200px"><a href="crystalShape.plot.html"><tt>plot</tt></a></td><td>colorize grains</td></tr><tr><td width="200px"><a href="crystalShape.plus.html"><tt>plus</tt></a></td><td>crystal shape should be first argument</td></tr><tr><td width="200px"><a href="crystalShape.repmat.html"><tt>repmat</tt></a></td><td>implements repmat for crystalShape</td></tr><tr><td width="200px"><a href="crystalShape.rotate.html"><tt>rotate</tt></a></td><td>a crystal shape by an rotation or orientation</td></tr><tr><td width="200px"><a href="crystalShape.rotate_outer.html"><tt>rotate_outer</tt></a></td><td>rotate a crystal shape by an rotation or orientation</td></tr><tr><td width="200px"><a href="crystalShape.size.html"><tt>size</tt></a></td><td>overloads size</td></tr><tr><td width="200px"><a href="crystalShape.subsref.html"><tt>subsref</tt></a></td><td>overloads subsref</td></tr></table></p></div></body></html>

    <div class="tags">
        
    </div>




</div>



<footer>
<div class="row">
<div class="col-lg-12 footer">
<p><img src="images/company_logo.png" alt="Company logo"/></p>
</div>
</div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
