<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">


<title>Slip System Analysis in \(\alpha\)-Alumina | MTEX</title>

<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">

<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme.css">
<link rel="stylesheet" href="css/theme-mtex.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<!-- Favicons -->
<link rel="apple-touch-icon" type="image/png" sizes="100x100" href="images/favicons/favicon.png">
<link rel="icon" type="image/png" sizes="100x100" href="images/favicons/favicon.png">
<link rel="manifest" href="images/favicons/manifest.json">
<meta name="msapplication-TileColor" content="#149983">
<meta name="msapplication-TileImage" size="100x100" type="image/png" content="images/favicons/favicon.png">
<meta name="theme-color" content="#149983">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

<!-- enable MathJax
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
          inlineMath: [['$','$']]
      }
  });
</script>-->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>


    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg navbar-brand" href="index"><img src="images/icons/MTEX_100x67px.png"></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <br><br>
            <ul class="nav navbar-nav navbar-right">

                <!-- topnav -->
                
                
                    
                        
                        
                            <li><a href="index">Home</a></li>
                        
                    
                        
                        
                            <li><a href="download">Download</a></li>
                        
                    
                        
                        
                            <li><a href="Documentation">Documentation</a></li>
                        
                    
                        
                        
                            <li><a href="function_reference">Function Reference</a></li>
                        
                    
                        
                        
                            <li class="active"><a href="examples">Examples</a></li>
                        
                    
                        
                        
                            <li><a href="workshop24">Workshops</a></li>
                        
                    
                        
                        
                            <li><a href="people">People</a></li>
                        
                    
                        
                        
                            <li><a href="search"><i class="fa fa-search"></i></a></li>
                        
                    
                

                
            </ul>
        </div>
    </div>
    <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Examples </li>
  
  
  
  <li>
      <a class="no_icon" href="#">Grain Analysis</a>
      <ul>
          
          
          
          <li><a class="no_icon" href="IceSphericity.html">Deformed Ice</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a class="no_icon" href="#">Seismics</a>
      <ul>
          
          
          
          <li><a class="no_icon" href="SeismicVelocitySingleCrystalDemo2d.html">Velocity Plots 1d</a></li>
          
          
          
          
          
          
          <li><a class="no_icon" href="SeismicPlots.html">Velocity Plots 2d</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a class="no_icon" href="#">Neutron Data</a>
      <ul>
          
          
          
          <li><a class="no_icon" href="TOF2PoleFigure.html">Quartz TOF Data</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a class="no_icon" href="#">Plasticity</a>
      <ul>
          
          
          
          <li class="active"><a class="no_icon" href="SlipSystemAlumina.html">Nanoidentation</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a class="no_icon" href="#" id="collapseAll">Collapse All</a> | <a class="no_icon" href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            
    <div class="post-header">
        <h1 class="post-title-main">Slip System Analysis in \(\alpha\)-Alumina</h1>
    </div>


<div class="post-content">

    

    


    

        <html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Slip System Analysis in \(\alpha\)-Alumina</title><meta name="generator" content="MATLAB 9.13"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2022-10-05"><meta name="DC.source" content="script_SlipSystemAlumina.m"></head><body><font size="2"><a href="https://github.com/mtex-toolbox/examples/blob/master/PlasticityExamples/SlipSystemAlumina.m">
    edit page</a>
    author: Ruben Wagner, Robert Lehnert, TU Bergakademie Freiberg, Institute
</font><div><!--introduction--><p>of Materials Engineering, Germany</p><!--/introduction--><h2 id="1">Data Import</h2><p>The following EBSD maps has been measured by Ruben Wagner TUBAF, Institute of Materials Engineering, 2022 within the project SFB 920. It shows an alumina inclusions in 42CrMo4 steel after nanoindentation.</p>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% set crystal symmetry</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">crystalSymmetry</span><span class="o">.</span><span class="nb">load</span><span class="p">(</span><span class="s1">'Al2O3-Corundum.cif'</span><span class="p">);</span>

<span class="c1">% set plotting convention</span>
<span class="n">setMTEXpref</span><span class="p">(</span><span class="s1">'xAxisDirection'</span><span class="p">,</span><span class="s1">'east'</span><span class="p">);</span>
<span class="n">setMTEXpref</span><span class="p">(</span><span class="s1">'zAxisDirection'</span><span class="p">,</span><span class="s1">'intoPlane'</span><span class="p">);</span>

<span class="c1">% import data</span>
<span class="n">ebsd</span> <span class="o">=</span> <span class="n">EBSD</span><span class="o">.</span><span class="nb">load</span><span class="p">(</span><span class="s1">'K1_C_16_EBSD_original_bc.txt'</span><span class="p">,</span><span class="k">...</span>
  <span class="p">{</span><span class="s1">'notIndexed'</span><span class="p">,</span><span class="n">cs</span><span class="p">,</span><span class="s1">'notIndexed'</span><span class="p">},</span><span class="s1">'interface'</span><span class="p">,</span><span class="s1">'csv'</span><span class="p">,</span><span class="s1">'silent'</span><span class="p">);</span>

<span class="c1">% rotate the data in the right reference frame</span>
<span class="n">rot</span> <span class="o">=</span> <span class="n">rotation</span><span class="o">.</span><span class="n">byEuler</span><span class="p">(</span><span class="mi">90</span><span class="o">*</span><span class="nb">degree</span><span class="p">,</span><span class="mi">180</span><span class="o">*</span><span class="nb">degree</span><span class="p">,</span><span class="mi">0</span><span class="o">*</span><span class="nb">degree</span><span class="p">);</span>
<span class="n">ebsd</span> <span class="o">=</span> <span class="nb">rotate</span><span class="p">(</span><span class="n">ebsd</span><span class="p">(</span><span class="s1">'indexed'</span><span class="p">),</span><span class="n">rot</span><span class="p">,</span><span class="s1">'keepXY'</span><span class="p">);</span></code></pre></figure>
<h2 id="2">Initial grain reconstruction and visualization</h2>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% reconstruct grain structure</span>
<span class="p">[</span><span class="n">grains</span><span class="p">,</span><span class="n">ebsd</span><span class="o">.</span><span class="n">grainId</span><span class="p">]</span> <span class="o">=</span> <span class="n">calcGrains</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span><span class="s1">'angle'</span><span class="p">,</span><span class="mi">1</span><span class="o">*</span><span class="nb">degree</span><span class="p">);</span>

<span class="n">cKey</span> <span class="o">=</span> <span class="n">ipfColorKey</span><span class="p">(</span><span class="n">cs</span><span class="p">);</span>
<span class="n">cKey</span><span class="o">.</span><span class="n">inversePoleFigureDirection</span> <span class="o">=</span> <span class="n">vector3d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

<span class="nb">figure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span><span class="n">cKey</span><span class="o">.</span><span class="n">orientation2color</span><span class="p">(</span><span class="n">ebsd</span><span class="o">.</span><span class="n">orientations</span><span class="p">))</span>
<span class="nb">hold</span> <span class="n">on</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">grains</span><span class="o">.</span><span class="nb">boundary</span><span class="p">,</span><span class="n">grains</span><span class="o">.</span><span class="nb">boundary</span><span class="o">.</span><span class="n">misrotation</span><span class="o">.</span><span class="nb">angle</span><span class="o">.</span><span class="p">/</span><span class="nb">degree</span><span class="p">,</span><span class="s1">'linewidth'</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">hold</span> <span class="n">off</span>
<span class="n">mtexColorbar</span></code></pre></figure>
<center>
<img class="inline" src="images/SlipSystemAlumina_01.png" alt="" />

</center><h2 id="3">Correct for misindexiation due to pseudosymmetry</h2><p>Looking at the raw data we observe several neighbouring measurements that are exactly 180 degree rotated with respect to each other. This is indicated by color coded grain boundaries. It is suspected that this misorientation occurs as the EBSD system has a hard time to distinguish the Kikuchi pattern of two orientations that differ by a rotation about the c-axis by 180 degree.</p><p>In order to correct for this misindexiation we proceed as follows</p><pre># Identify grain boundaries due to pseudo symmetry
# Merge grains with common pseudo symmetry grain boundaries and
compute the dominant orientation of the merged grains
# Correct the EBSD data according to the pseudo symmetry</pre><p><b>1. Identify boundaries between pseudosymmetric grains</b></p>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% all Corundum Corundum boundaries</span>
<span class="n">gB</span> <span class="o">=</span> <span class="n">grains</span><span class="o">.</span><span class="nb">boundary</span><span class="p">(</span><span class="s1">'indexed'</span><span class="p">);</span>

<span class="c1">% define the pseudo symmetry</span>
<span class="n">pseudoSym</span> <span class="o">=</span> <span class="n">orientation</span><span class="o">.</span><span class="n">byAxisAngle</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">cAxis</span><span class="p">,</span><span class="mi">180</span><span class="o">*</span><span class="nb">degree</span><span class="p">);</span>

<span class="c1">% allow for a three 3 degree threshold</span>
<span class="n">ispseudoBnd</span> <span class="o">=</span> <span class="nb">angle</span><span class="p">(</span><span class="n">gB</span><span class="o">.</span><span class="n">misorientation</span><span class="p">,</span><span class="n">pseudoSym</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">*</span><span class="nb">degree</span><span class="p">;</span></code></pre></figure>
<p><b>2. Merge grains with common pseudo symmetry grain boundaries</b> This results is two big grains as visualised below</p>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="p">[</span><span class="n">grains</span><span class="p">,</span> <span class="n">parentId</span><span class="p">]</span> <span class="o">=</span> <span class="n">grains</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">gB</span><span class="p">(</span><span class="n">ispseudoBnd</span><span class="p">),</span><span class="s1">'calcMeanOrientation'</span><span class="p">,</span><span class="k">...</span>
  <span class="o">@</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="n">updateOri</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">pseudoSym</span><span class="p">));</span>

<span class="nb">plot</span><span class="p">(</span><span class="n">grains</span><span class="p">,</span><span class="n">cKey</span><span class="o">.</span><span class="n">orientation2color</span><span class="p">(</span><span class="n">grains</span><span class="o">.</span><span class="n">meanOrientation</span><span class="p">))</span></code></pre></figure>
<center>
<img class="inline" src="images/SlipSystemAlumina_02.png" alt="" />

</center><p><b>3. Correct the EBSD data according to the pseudo symmetry</b></p>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% find all EBSD data which differ by the computed grain orientation by</span>
<span class="c1">% about 180 degree</span>
<span class="n">flipPseudo</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="nb">angle</span><span class="p">(</span><span class="n">ebsd</span><span class="o">.</span><span class="n">orientations</span><span class="p">,</span><span class="n">grains</span><span class="p">(</span><span class="n">parentId</span><span class="p">(</span><span class="n">ebsd</span><span class="o">.</span><span class="n">grainId</span><span class="p">))</span><span class="o">.</span><span class="n">meanOrientation</span><span class="p">)</span><span class="o">&gt;</span> <span class="mi">10</span><span class="o">*</span><span class="nb">degree</span><span class="p">);</span>

<span class="n">ebsd</span><span class="p">(</span><span class="n">flipPseudo</span><span class="p">)</span><span class="o">.</span><span class="n">orientations</span> <span class="o">=</span> <span class="n">ebsd</span><span class="p">(</span><span class="n">flipPseudo</span><span class="p">)</span><span class="o">.</span><span class="n">orientations</span> <span class="o">*</span> <span class="n">pseudoSym</span><span class="p">;</span>

<span class="n">cKey</span><span class="o">.</span><span class="n">inversePoleFigureDirection</span> <span class="o">=</span> <span class="n">zvector</span><span class="p">;</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span><span class="n">cKey</span><span class="o">.</span><span class="n">orientation2color</span><span class="p">(</span><span class="n">ebsd</span><span class="o">.</span><span class="n">orientations</span><span class="p">))</span></code></pre></figure>
<center>
<img class="inline" src="images/SlipSystemAlumina_03.png" alt="" />

</center><h2 id="6">Data cleaning</h2><p>We perform some more data cleaning steps including</p><div><ol><li>removing too small grains</li><li>filling of the not indexed pixels</li></ol></div>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% redo grain reconstruction</span>
<span class="p">[</span><span class="n">grains</span><span class="p">,</span><span class="n">ebsd</span><span class="o">.</span><span class="n">grainId</span><span class="p">]</span> <span class="o">=</span> <span class="n">calcGrains</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span><span class="s1">'angle'</span><span class="p">,</span><span class="mi">1</span><span class="o">*</span><span class="nb">degree</span><span class="p">);</span>

<span class="c1">% and remove little grains</span>
<span class="n">ebsd</span><span class="p">(</span><span class="n">grains</span><span class="p">(</span><span class="n">grains</span><span class="o">.</span><span class="n">grainSize</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">))</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">[</span><span class="n">grains</span><span class="p">,</span><span class="n">ebsd</span><span class="o">.</span><span class="n">grainId</span><span class="p">]</span> <span class="o">=</span> <span class="n">calcGrains</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span><span class="s1">'angle'</span><span class="p">,</span><span class="mi">1</span><span class="o">*</span><span class="nb">degree</span><span class="p">);</span>

<span class="c1">% filling EBSD holes</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">halfQuadraticFilter</span><span class="p">;</span>
<span class="n">F</span><span class="o">.</span><span class="nb">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">;</span>
<span class="n">ebsdS</span> <span class="o">=</span> <span class="n">smooth</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="s1">'fill'</span><span class="p">,</span><span class="n">grains</span><span class="p">);</span>

<span class="c1">% visualize the result</span>
<span class="n">cKey</span><span class="o">.</span><span class="n">inversePoleFigureDirection</span> <span class="o">=</span> <span class="n">zvector</span><span class="p">;</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">ebsdS</span><span class="p">,</span><span class="n">cKey</span><span class="o">.</span><span class="n">orientation2color</span><span class="p">(</span><span class="n">ebsdS</span><span class="o">.</span><span class="n">orientations</span><span class="p">))</span>

<span class="nb">hold</span> <span class="n">on</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span> <span class="n">ebsd</span><span class="o">.</span><span class="n">bc</span><span class="p">,</span><span class="s1">'FaceAlpha'</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)</span>
<span class="nb">colormap</span> <span class="nb">gray</span> <span class="c1">% make the image grayscale</span>
<span class="n">mtexColorbar</span>
<span class="nb">hold</span> <span class="n">off</span></code></pre></figure>
<center>
<img class="inline" src="images/SlipSystemAlumina_04.png" alt="" />

</center><h2 id="7">Schmid Factor Analysis</h2><p>Next we compute the the active slip system during pressure in z-direction. The possible dominant slip systems in alumina are described in Mao2011 and 2012 as</p>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">n</span> <span class="o">=</span> <span class="n">Miller</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">cs</span><span class="p">,</span><span class="s1">'HKIL'</span><span class="p">);</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Miller</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">cs</span><span class="p">,</span><span class="s1">'UVTW'</span><span class="p">);</span>
<span class="n">sS</span> <span class="o">=</span> <span class="n">slipSystem</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">n</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">sS = slipSystem (Corundum)
 
   U    V    T    W  | H    K    I    L CRSS
  -1    2   -1    0    1    0   -1    1    1</code></pre></figure>
<p>Next we determine the Schmid factor for all symmetrically equivalent slip systems.</p>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% rotate symmetrically equivalent slip systems into specimen coordinates of</span>
<span class="c1">% each grain</span>
<span class="n">sSLocal</span> <span class="o">=</span> <span class="n">grains</span><span class="o">.</span><span class="n">meanOrientation</span> <span class="o">*</span> <span class="n">sS</span><span class="o">.</span><span class="n">symmetrise</span><span class="p">(</span><span class="s1">'antipodal'</span><span class="p">);</span>

<span class="c1">% compute Schmid factor according Z axis</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="n">stressTensor</span><span class="o">.</span><span class="n">uniaxial</span><span class="p">(</span><span class="n">vector3d</span><span class="o">.</span><span class="n">Z</span><span class="p">);</span>
<span class="n">SF</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">sSLocal</span><span class="o">.</span><span class="n">SchmidFactor</span><span class="p">(</span><span class="n">sigma</span><span class="p">));</span>

<span class="c1">% sort the slips system according to their Schmid factor from largest to</span>
<span class="c1">% smallest</span>
<span class="p">[</span><span class="n">SF</span><span class="p">,</span> <span class="n">reorder</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sort</span><span class="p">(</span><span class="n">SF</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">"descend"</span><span class="p">);</span>
<span class="n">reorder</span> <span class="o">=</span> <span class="nb">sub2ind</span><span class="p">(</span><span class="nb">size</span><span class="p">(</span><span class="n">reorder</span><span class="p">),</span><span class="nb">repmat</span><span class="p">((</span><span class="mi">1</span><span class="p">:</span><span class="nb">size</span><span class="p">(</span><span class="n">reorder</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nb">size</span><span class="p">(</span><span class="n">reorder</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span><span class="n">reorder</span><span class="p">);</span>
<span class="n">sSLocal</span> <span class="o">=</span> <span class="n">sSLocal</span><span class="p">(</span><span class="n">reorder</span><span class="p">);</span></code></pre></figure>
<p>Finally, we plot the trace of the slip planes together with the slip direction in the EBSD map.</p>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="nb">figure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">cKey</span><span class="o">.</span><span class="n">inversePoleFigureDirection</span> <span class="o">=</span> <span class="n">zvector</span><span class="p">;</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">ebsdS</span><span class="p">,</span><span class="n">cKey</span><span class="o">.</span><span class="n">orientation2color</span><span class="p">(</span><span class="n">ebsdS</span><span class="o">.</span><span class="n">orientations</span><span class="p">))</span>

<span class="nb">hold</span> <span class="n">on</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">ebsd</span><span class="p">,</span> <span class="n">ebsd</span><span class="o">.</span><span class="n">bc</span><span class="p">,</span><span class="s1">'FaceAlpha'</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)</span>
<span class="nb">colormap</span> <span class="nb">gray</span> <span class="c1">% make the image grayscale</span>
<span class="nb">hold</span> <span class="n">off</span>

<span class="n">order</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nb">hold</span> <span class="n">on</span>
<span class="c1">% visualize the trace of the slip plane</span>
<span class="nb">quiver</span><span class="p">(</span><span class="n">grains</span><span class="p">,</span><span class="n">sSLocal</span><span class="p">(:,</span><span class="n">order</span><span class="p">)</span><span class="o">.</span><span class="nb">trace</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="s1">'blue'</span><span class="p">,</span><span class="s1">'linewidth'</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="c1">% and the slip direction</span>
<span class="nb">quiver</span><span class="p">(</span><span class="n">grains</span><span class="p">,</span><span class="n">sSLocal</span><span class="p">(:,</span><span class="n">order</span><span class="p">)</span><span class="o">.</span><span class="n">b</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="s1">'gray'</span><span class="p">,</span><span class="s1">'linewidth'</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="nb">hold</span> <span class="n">off</span></code></pre></figure>
<center>
<img class="inline" src="images/SlipSystemAlumina_05.png" alt="" />

</center>
<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="k">function</span> <span class="n">ori</span> <span class="o">=</span> <span class="n">updateOri</span><span class="p">(</span><span class="n">grains</span><span class="p">,</span><span class="n">pseudoSym</span><span class="p">)</span>

<span class="n">ori</span> <span class="o">=</span> <span class="n">grains</span><span class="o">.</span><span class="n">meanOrientation</span><span class="p">;</span>

<span class="n">cId</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="n">calcCluster</span><span class="p">(</span><span class="n">ori</span><span class="p">,</span><span class="s1">'weights'</span><span class="p">,</span><span class="n">grains</span><span class="o">.</span><span class="n">grainSize</span><span class="p">);</span>

<span class="c1">% variant 1</span>
<span class="p">[</span><span class="o">~</span><span class="p">,</span><span class="n">isTrue</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">accumarray</span><span class="p">(</span><span class="n">cId</span><span class="p">(:),</span><span class="n">grains</span><span class="o">.</span><span class="n">grainSize</span><span class="p">));</span>

<span class="c1">% variant 2</span>
<span class="c1">%[~,isTrue] = max(accumarray(cId(:),grains.numNeighbors));</span>

<span class="n">ori</span><span class="p">(</span><span class="n">cId</span> <span class="o">~=</span> <span class="n">isTrue</span><span class="p">)</span> <span class="o">=</span> <span class="n">ori</span><span class="p">(</span><span class="n">cId</span> <span class="o">~=</span> <span class="n">isTrue</span><span class="p">)</span> <span class="o">*</span> <span class="n">pseudoSym</span><span class="p">;</span>

<span class="n">ori</span> <span class="o">=</span> <span class="nb">mean</span><span class="p">(</span><span class="n">ori</span><span class="p">,</span><span class="s1">'weigths'</span><span class="p">,</span><span class="n">grains</span><span class="o">.</span><span class="n">grainSize</span><span class="p">,</span><span class="s1">'robust'</span><span class="p">);</span>

<span class="k">end</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">...</code></pre></figure>
<h2 id="11">References</h2><div><ul><li>Ruben Wagner, Robert Lehnert, Enrico Storti, Lisa Ditscherlein, Christina Schr&ouml;der, Steffen Dudczig, Urs A. Peuker, Olena Volkova, Christos G. Aneziris, Horst Biermann, Anja Weidner, <a href="https://www.sciencedirect.com/science/article/abs/pii/S1044580322005393"><i>Nanoindentation of alumina and multiphase inclusions in 42CrMo4 steel</i></a>, 2022.</li></ul></div></div></body></html>

    <div class="tags">
        
    </div>

    


</div>

<footer>
    <div class="row">
        <div class="col-lg-12 footer">
            <p>
                <img src="images/icons/MTEX_100x67px.png" alt="MTEX logo">
            </p>
        </div>
    </div>
</footer>

        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-83346204-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>
