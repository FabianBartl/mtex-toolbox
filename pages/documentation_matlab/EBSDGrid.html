---
title: Gridded EBSD Data
last_updated: 11-Oct-2019
sidebar: documentation_sidebar
permalink: EBSDGrid.html
folder: documentation
toc: false
---

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Gridded EBSD Data</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-10-11"><meta name="DC.source" content="script_EBSDGrid.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit EBSDGrid into the Matlab commandline">edit page</a></font><div><!--introduction--><!--/introduction--><p>In this section we discuss specific operations that are available for EBSD data which are measured on a square or hexagonal grid.</p><p>By default MTEX ignores any gridding in the data. The reason for this is that when restricting to some subset, e.g. to a certain phase, the data will not form a regular grid anyway. For that reason, almost all functions in MTEX are implemented to work for arbitrarily aligned data.</p><p>On the other hand, there are certain functions that are only available or much faster for gridded data. Those functions include <a href="EBSDPlotting.html">plotting</a>, <a href="EBSDGradient.html">gradient computation</a> and <a href="EBSDDenoising.html">denoising</a>. The key command to make MTEX aware of EBSD data on a hexagonal or square grid is <a href="EBSD.gridify.html">gridify</a>.</p><p>In order to explain the corresponding concept in more detail lets import some sample data.</p>
{% highlight matlab %}
plotx2east
mtexdata twins

plot(ebsd('Magnesium'),ebsd('Magnesium').orientations)
{% endhighlight %}

{% highlight plaintext %}
 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     0     46 (0.2%)  notIndexed                                                 
     1  22833 (100%)   Magnesium  LightSkyBlue     6/mmm       X||a*, Y||b, Z||c*
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 

{% endhighlight %}

  {% include inline_image.html file="EBSDGrid_01.png" %}
<p>As we can see already from the phase plot above the data have been measured at an rectangular grid. A quick look at the unit cell verifies this</p>
{% highlight matlab %}
ebsd.unitCell
{% endhighlight %}

{% highlight plaintext %}
ans =
   -0.1500   -0.1500
    0.1500   -0.1500
    0.1500    0.1500
   -0.1500    0.1500

{% endhighlight %}
<p>If we apply the command <a href="EBSD.gridify.html">gridify</a> to the data set</p>
{% highlight matlab %}
ebsd = ebsd.gridify
{% endhighlight %}

{% highlight plaintext %}
 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     0     46 (0.2%)  notIndexed                                                 
     1  22833 (100%)   Magnesium  LightSkyBlue     6/mmm       X||a*, Y||b, Z||c*
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 Grid size (square): 137 x 167
 

{% endhighlight %}
<p>we data get aligned in a 137 x 167 matrix. In particular we may now apply standard matrix indexing to our EBSD data, e.g., to access the EBSD data at position 50,100 we can simply do</p>
{% highlight matlab %}
ebsd(50,100)
{% endhighlight %}

{% highlight plaintext %}
 
ans = EBSD  
 
 Phase  Orientations    Mineral         Color  Symmetry  Crystal reference frame
     1      1 (100%)  Magnesium  LightSkyBlue     6/mmm       X||a*, Y||b, Z||c*
 
    Id   Phase   phi1   Phi   phi2   bands    bc    bs   error   mad      x      y
 13613       1    156   101    239      10   149   133       0   0.7   29.7   14.7
 Scan unit : um
 

{% endhighlight %}
<p>It is important to understand that the property of beeing shaped as a matrix is lost as soon as we <a href="EBSDSelect.html">select</a> a subset of data</p>
{% highlight matlab %}
ebsdMg = ebsd('Magnesium')
{% endhighlight %}

{% highlight plaintext %}
 
ebsdMg = EBSD  
 
 Phase  Orientations    Mineral         Color  Symmetry  Crystal reference frame
     1  22833 (100%)  Magnesium  LightSkyBlue     6/mmm       X||a*, Y||b, Z||c*
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 

{% endhighlight %}
<p>However, we may always force it into matrix form by reapplying the command <a href="EBSD.gridify.html">gridify</a></p>
{% highlight matlab %}
ebsdMg = ebsd('Magnesium').gridify
{% endhighlight %}

{% highlight plaintext %}
 
ebsdMg = EBSD  
 
 Phase  Orientations    Mineral         Color  Symmetry  Crystal reference frame
     1  22833 (100%)  Magnesium  LightSkyBlue     6/mmm       X||a*, Y||b, Z||c*
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 Grid size (square): 137 x 167
 

{% endhighlight %}
<p>The difference between both matrix shapes EBSD variables <b>ebsd</b> and <b>ebsdMg</b> is that not indexed pixels in <b>ebsd</b> are stored as the seperate phase <b>notIndexed</b> while in <b>ebsdMg</b> all pixels have phase Magnesium but the Euler angles of the not indexed pixels are set to nan. This allows to select and plot subregions of the EBSD in a very intuitive way by</p>
{% highlight matlab %}
plot(ebsdMg(50:100,5:100),ebsdMg(50:100,5:100).orientations)
{% endhighlight %}

  {% include inline_image.html file="EBSDGrid_02.png" %}
<h2 id="8">The Gradient</h2>
{% highlight matlab %}
gradX = ebsdMg.gradientX;

plot(ebsdMg,norm(gradX))
caxis([0,4*degree])
{% endhighlight %}

  {% include inline_image.html file="EBSDGrid_03.png" %}
<h2 id="9">Hexagonal Grids</h2><p>Next lets import some data on a hexagonal grid</p>
{% highlight matlab %}
mtexdata copper

ebsd = ebsd.gridify

plot(ebsd,ebsd.orientations)
{% endhighlight %}

{% highlight plaintext %}
 loading data ...
Warning: more column data was passed in than expected. Check your column names make sense!
 saving data to /home/felix/repo/mtex/data/copper.mat
 
ebsd = EBSD  
 
 Phase  Orientations  Mineral         Color  Symmetry  Crystal reference frame
     0  16116 (100%)   Copper  LightSkyBlue       432                         
 
 Properties: confidenceindex, fit, imagequality, semsignal, unknown_11, unknown_12, unknown_13, unknown_14, x, y
 Scan unit : um
 
 
ebsd = EBSD  
 
 Phase  Orientations  Mineral         Color  Symmetry  Crystal reference frame
     0  16116 (100%)   Copper  LightSkyBlue       432                         
 
 Properties: confidenceindex, fit, imagequality, semsignal, unknown_11, unknown_12, unknown_13, unknown_14, x, y
 Scan unit : um
 Grid size (hex): 136 x 119
 

{% endhighlight %}

  {% include inline_image.html file="EBSDGrid_04.png" %}
<p>Indexing works here similarly as for square grids</p>
{% highlight matlab %}
plot(ebsd(1:10,:),ebsd(1:10,:).orientations,'micronbar','off')
{% endhighlight %}

  {% include inline_image.html file="EBSDGrid_05.png" %}

{% highlight matlab %}
plot(ebsd(:,1:10),ebsd(:,1:10).orientations,'micronbar','off')
{% endhighlight %}

  {% include inline_image.html file="EBSDGrid_06.png" %}
</div></body></html>