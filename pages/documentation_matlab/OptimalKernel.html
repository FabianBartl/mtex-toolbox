---
title: Optimal Kernel Selection
last_updated: 01-Aug-2020
sidebar: documentation_sidebar
permalink: OptimalKernel.html
folder: documentation
toc: false
---
    <html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Optimal Kernel Selection</title><meta name="generator" content="MATLAB 9.9"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-08-01"><meta name="DC.source" content="script_OptimalKernel.m"></head><body><font size="2"><a href="https://github.com/mtex-toolbox/mtex/blob/develop/doc/GeneralConcepts/OptimalKernel.m">
    edit page</a></font><div><!--introduction--><!--/introduction-->
{% highlight matlab %}
cs = crystalSymmetry('32');

odf = 0.25*uniformODF(cs) + 0.5*fibreODF(fibre.alpha(cs),'halfwidth',10*degree) + 0.25*unimodalODF(orientation.brass(cs));

plot(odf,'sections',6,'silent','sigma')
mtexColorbar
{% endhighlight %}
<center>
{% include inline_image.html file="OptimalKernel_01.png" %}
</center><h2 id="2">Exploration of the relationship between estimation error and number of single orientations</h2><p>For a more systematic analysis of the estimation error, we simulate 10, 100, ..., 1000000 single orientations of the model ODF and calculate the approximation error for the ODFs estimated from these data.</p>
{% highlight matlab %}
e = [];
for i = 1:6

  ori = calcOrientations(odf,10^i,'silent');

  psi1 = calcKernel(ori,'SamplingSize',10000,'silent');
  odf_rec = calcDensity(ori,'kernel',psi1,'silent');
  e(i,1) = calcError(odf_rec,odf,'resolution',2.5*degree);

  psi2 = calcKernel(ori,'method','RuleOfThumb','silent');
  odf_rec = calcDensity(ori,'kernel',psi2,'silent');
  e(i,2) = calcError(odf_rec,odf,'resolution',2.5*degree);

  psi3 = calcKernel(ori,'method','magicRule','silent');
  odf_rec = calcDensity(ori,'kernel',psi3,'silent');
  e(i,3) = calcError(odf_rec,odf,'resolution',2.5*degree);

  disp(['RuleOfThumb: ' int2str(psi2.halfwidth/degree) mtexdegchar ...
    ' KLCV: ' int2str(psi1.halfwidth/degree) mtexdegchar ...
    ' magicRule: ' int2str(psi3.halfwidth/degree) mtexdegchar ...
    ]);

end
{% endhighlight %}

{% highlight plaintext %}
RuleOfThumb: 78° KLCV: 24° magicRule: 31°
RuleOfThumb: 31° KLCV: 12° magicRule: 22°
RuleOfThumb: 18° KLCV: 8° magicRule: 16°
RuleOfThumb: 10° KLCV: 6° magicRule: 11°
RuleOfThumb: 8° KLCV: 5° magicRule: 8°
RuleOfThumb: 7° KLCV: 4° magicRule: 6°
{% endhighlight %}
<p>Plot the error in dependency of the number of single orientations.</p>
{% highlight matlab %}
close all;
loglog(10.^(1:length(e)),e,'LineWidth',2)
legend('Default','RuleOfThumb','magicRule')
xlabel('Number of orientations')
ylabel('Estimation Error')
title('Error between original fibre ODF model and simulated ebsd','FontWeight','bold')
{% endhighlight %}
<center>
{% include inline_image.html file="OptimalKernel_02.png" %}
</center></div></body></html>