---
title: IPF Maps
last_updated: 05-Oct-2019
sidebar: documentation_sidebar
permalink: EBSDIPFMap.html
folder: documentation
toc: false
---

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>IPF Maps</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-10-05"><meta name="DC.source" content="script_EBSDIPFMap.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit EBSDIPFMap into the Matlab commandline">edit page</a></font><div><!--introduction--><!--/introduction--><p>This section explains various options to customize ipf orientation maps. The mathematics behind the default MTEX color key is explained in detail in the paper <a href="http://dx.doi.org/10.1107/S1600576716012942">Orientations - perfectly colored</a>. Let us first import some sample EBSD data.</p><pre class="codeinput">close <span class="string">all</span>; plotx2east
mtexdata <span class="string">forsterite</span>
csFo = ebsd(<span class="string">'Forsterite'</span>).CS;
</pre><pre class="codeoutput"> 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     0   58485 (24%)  notIndexed                                                 
     1  152345 (62%)  Forsterite  LightSkyBlue       mmm                         
     2   26058 (11%)   Enstatite  DarkSeaGreen       mmm                         
     3   9064 (3.7%)    Diopside     Goldenrod     12/m1       X||a*, Y||b*, Z||c
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 
</pre><h2 id="2">The basic setup</h2><p>In order to transform orientations into color one usually defines a <a href="orientationColorKey_index.html">orientation color key</a> ,e.g,</p><pre class="codeinput">ipfKey = ipfHSVKey(ebsd(<span class="string">'Forsterite'</span>).CS)
</pre><pre class="codeoutput">ipfKey = 
  ipfHSVKey with properties:

             colorPostRotation: [1&times;1 rotation]
               colorStretching: 1
                   whiteCenter: [1&times;1 vector3d]
                     grayValue: [0.2000 0.5000]
                  grayGradient: 0.5000
                      maxAngle: Inf
    inversePoleFigureDirection: [1&times;1 vector3d]
                        dirMap: [1&times;1 HSVDirectionKey]
                           CS1: [4&times;2 crystalSymmetry]
                           CS2: [1&times;1 specimenSymmetry]
                     antipodal: 0
</pre><p>Note that a mandatory argument to any color key is always the symmetry of the objects to be transformed into colors. When plotting the color key we see that plotting region automatically adapts to the fundamental sector of orthorhombic crystal symmetry</p><pre class="codeinput">plot(ipfKey)
</pre>
  {% include inline_image.html file="EBSDIPFMap_01.png" %}
<p>In order to apply this color key for colorizing the map we proceed as follows</p><pre class="codeinput"><span class="comment">% compute the colors</span>
color = ipfKey.orientation2color(ebsd(<span class="string">'Fo'</span>).orientations);

<span class="comment">% plot the colors</span>
close <span class="string">all</span>
plot(ebsd(<span class="string">'Forsterite'</span>),color)
</pre>
  {% include inline_image.html file="EBSDIPFMap_02.png" %}
<h2 id="5">Customizing the color key</h2><p>Orientation color keys usually provide several options to alter the alignment of colors. Let's give some examples</p><pre class="codeinput"><span class="comment">% we may interchange green and blue by setting</span>
ipfKey.colorPostRotation = reflection(yvector);

plot(ipfKey)
</pre>
  {% include inline_image.html file="EBSDIPFMap_03.png" %}
<p>or cycle of colors red, green, blue by</p><pre class="codeinput">ipfKey.colorPostRotation = rotation.byAxisAngle(zvector,120*degree);

plot(ipfKey)
</pre>
  {% include inline_image.html file="EBSDIPFMap_04.png" %}
<p>Furthermore, we can explicitly set the inverse pole figure directions by</p><pre class="codeinput">ipfKey.inversePoleFigureDirection = zvector;

<span class="comment">% compute the colors again</span>
color = ipfKey.orientation2color(ebsd(<span class="string">'Forsterite'</span>).orientations);

<span class="comment">% and plot them</span>
close <span class="string">all</span>
plot(ebsd(<span class="string">'Forsterite'</span>),color)
</pre>
  {% include inline_image.html file="EBSDIPFMap_05.png" %}
<h2 id="8">Laue or Enantiomorphic symmetry groups</h2><p>As the Euler angles provided by the EBSD measurement devices describe proper rotations only they do not include any improper symmetry operation. For this reason it is entirely justified to consider for the ipf map proper symmetries only. Lets define the corresponding color key</p><pre class="codeinput"><span class="comment">% the colore key corresponding to the purely enantiomorphic symmetry group</span>
ipfKey = ipfHSVKey(ebsd(<span class="string">'Forsterite'</span>).CS.properGroup)
plot(ipfKey)
</pre><pre class="codeoutput">ipfKey = 
  ipfHSVKey with properties:

             colorPostRotation: [1&times;1 rotation]
               colorStretching: 1
                   whiteCenter: [1&times;1 vector3d]
                     grayValue: [0.2000 0.5000]
                  grayGradient: 0.5000
                      maxAngle: Inf
    inversePoleFigureDirection: [1&times;1 vector3d]
                        dirMap: [1&times;1 HSVDirectionKey]
                           CS1: [4&times;1 crystalSymmetry]
                           CS2: [1&times;1 specimenSymmetry]
                     antipodal: 0
</pre>
  {% include inline_image.html file="EBSDIPFMap_06.png" %}
<p>We oberseve that the key is twice as large and hence allows for a better distinction between orientations.</p><pre class="codeinput">close <span class="string">all</span>
color = ipfKey.orientation2color(ebsd(<span class="string">'Fo'</span>).orientations);
plot(ebsd(<span class="string">'Forsterite'</span>),color)
</pre>
  {% include inline_image.html file="EBSDIPFMap_07.png" %}
<h2 id="10">Other inverse pole figure keys</h2><p>Beside the default ipf color key MTEX provides the default color keys are they are used by other popular EBSD systems.</p><pre class="codeinput">plot(ipfTSLKey(csFo))
</pre>
  {% include inline_image.html file="EBSDIPFMap_08.png" %}
<pre class="codeinput">plot(ipfHKLKey(csFo))
</pre>
  {% include inline_image.html file="EBSDIPFMap_09.png" %}
<p>The user should be aware that for certain symmetry groups these color key lead to color jumps.</p></div></body></html>