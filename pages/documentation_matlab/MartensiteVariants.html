---
title: Martensite Variants
last_updated: 08-Jul-2020
sidebar: documentation_sidebar
permalink: MartensiteVariants.html
folder: documentation
toc: false
---
    <html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Martensite Variants</title><meta name="generator" content="MATLAB 9.9"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-07-08"><meta name="DC.source" content="script_MartensiteVariants.m"></head><body><font size="2"><a href="https://github.com/mtex-toolbox/mtex/blob/develop/doc/PhaseTransistions/MartensiteVariants.m">
    edit page</a></font><div><!--introduction--><!--/introduction--><p>In this section we discuss the Austenite to Ferrite phase transition. We do so at hand of an EBSD data set of the famous Emsland metereoid.</p>
{% highlight matlab %}
plotx2east

% import the ebsd data
mtexdata emsland

% extract crystal symmetries
cs_bcc = ebsd('Fe').CS;
cs_aus = ebsd('Aus').CS;

% recover grains
ebsd = ebsd('indexed');

[grains,ebsd.grainId,ebsd.mis2mean] = calcGrains(ebsd,'angle',5*degree);
ebsd(grains(grains.grainSize<=2)) = [];
[grains,ebsd.grainId,ebsd.mis2mean] = calcGrains(ebsd,'angle',5*degree);

grains = smooth(grains,4);
{% endhighlight %}

{% highlight plaintext %}
ebsd = EBSD  
 
 Phase  Orientations       Mineral         Color  Symmetry  Crystal reference frame
     0  18393 (6.8%)    notIndexed                                                 
     1  215769 (80%)  Ferrite, bcc  LightSkyBlue      m-3m                         
     2   35838 (13%)     Austenite  DarkSeaGreen      m-3m                         
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
{% endhighlight %}
<p>The following lines plots the Martensite phase colorized according to its orientation and the Austenite phase in blue.</p>
{% highlight matlab %}
plot(ebsd('Fe'),ebsd('Fe').orientations)
hold on
plot(grains.boundary,'lineWidth',2,'lineColor','gray')
plot(grains('Aus'),'FaceColor','blue','edgeColor','b','lineWidth',1,'DisplayName','Austenite')
hold off
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_01.png" %}
</center><p>We observe quite many small austenite grains surrounding the ferrite grains. Considering only the parent austenite phase and plotting the orientations into an axis angle plot</p>
{% highlight matlab %}
plot(ebsd('Aus').orientations,'axisAngle')
{% endhighlight %}

{% highlight plaintext %}
plot 2000 random orientations out of 30123 given orientations
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_02.png" %}
</center><p>we observe that they concentrated around one single orientations, i.e., the all measurements most likely originates from a single austenite crystal. We can find this parent austenite orientation by taking the <a href="orientation.mean.html"><code class="language-plaintext highlighter-rouge">mean</code></a> and compute the fit by the command <a href="orientation.std.html"><code class="language-plaintext highlighter-rouge">std</code></a></p>
{% highlight matlab %}
parenOri = mean(ebsd('Aus').orientations)

fit = std(ebsd('Aus').orientations) ./ degree
{% endhighlight %}

{% highlight plaintext %}
parenOri = orientation  
  size: 1 x 1
  crystal symmetry : Austenite (m-3m)
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  266.299 163.622 245.519       0
 
fit =
    1.2738
{% endhighlight %}
<p>Next we plot the martensite orientations into pole figures and plot on top of them the parent austenite orientation.</p>
{% highlight matlab %}
childOri = grains('Fe').meanOrientation;

h_bcc = Miller({1,0,0},{1,1,0},{1,1,1},cs_bcc);
h_fcc = Miller({1,0,0},{1,1,0},{1,1,1},cs_aus);

plotPDF(childOri,h_bcc,'MarkerSize',5);

nextAxis(1)
hold on
plot(parenOri * h_fcc(1).symmetrise ,'MarkerFaceColor','r')
xlabel('\((100)\)','Color','red','Interpreter','latex')

nextAxis(2)
plot(parenOri * h_fcc(3).symmetrise ,'MarkerFaceColor','r')
xlabel('\((111)\)','Color','red','Interpreter','latex')

nextAxis(3)
plot(parenOri * h_fcc(2).symmetrise ,'MarkerFaceColor','r')
xlabel('\((110)\)','Color','red','Interpreter','latex')
hold off

drawNow(gcm)
{% endhighlight %}

{% highlight plaintext %}
I'm plotting 208 random orientations out of 3886 given orientations
  You can specify the the number points by the option "points".
  The option "all" ensures that all data are plotted
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_03.png" %}
</center><p>Here we marked in red the parent austenite orientation and in blue the child martensite orientations. As the superposition of the martensite (111) pole figure and the (110) austenite pole figure sugest there seems to be a orientation relation ship with respect to these two crystallographic axes. In fact, the Kurdjumov Sachs orientation relationship is exactly defined by alligning the (111) axis of the austenite phase with the (100) axes of the martensite phase and vice versa. Lets define it the explicite way. We could have used also the command <code class="language-plaintext highlighter-rouge">orientation.KurdjumovSachs(cs_aus,cs_bcc)</code>.</p>
{% highlight matlab %}
KS = orientation.map(Miller(1,1,1,cs_aus),Miller(0,1,1,cs_bcc),...
      Miller(-1,0,1,cs_aus),Miller(-1,-1,1,cs_bcc));


plotPDF(variants(KS,parenOri),'add2all','MarkerFaceColor','none','MarkerEdgeColor','k','linewidth',2)
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_04.png" %}
</center><p>In order to quantify the fit between the Kurdjumov Sachs orientation relationship and the actual orientation relation ship in the data we compute the mean angular deviation between all parent to child misorientaitons and the Kurdjumov Sachs orientation relationship</p>
{% highlight matlab %}
% all parent to child misorientations
mori = inv(childOri) * parenOri;

% mean angular deviation in degree
mean(angle(mori, KS)) ./ degree

%fit = sqrt(mean(min(angle_outer(childOri,variants(KS,parenOri)),[],2).^2))./degree
{% endhighlight %}

{% highlight plaintext %}
ans =
    3.9199
{% endhighlight %}
<h2 id="8">Estimating the parent to child orientation relationship</h2><p>We may have asked ourselfs whether there is an orientation relationship that better fits the measured misorientations than Kurdjumov Sachs. A canocial candidate would be the <a href="orientation.mean.html"><code class="language-plaintext highlighter-rouge">mean</code></a> of all misorientations</p>
{% highlight matlab %}
% the mean of all measured parent to child misorientations
p2cMean = mean(mori,'robust')

plotPDF(childOri,h_bcc,'MarkerSize',5);
hold on
plotPDF(variants(p2cMean,parenOri),'add2all','MarkerFaceColor','none','MarkerEdgeColor','k','linewidth',2)
hold off

% mean angular deviation in degree
mean(angle(mori, p2cMean)) ./ degree
{% endhighlight %}

{% highlight plaintext %}
p2cMean = misorientation  
  size: 1 x 1
  crystal symmetry : Austenite (m-3m)
  crystal symmetry : Ferrite, bcc (m-3m)
 
  Bunge Euler angles in degree
  phi1     Phi    phi2    Inv.
   289 8.11984 27.0131       0
 
  I'm plotting 208 random orientations out of 3886 given orientations
  You can specify the the number points by the option "points".
  The option "all" ensures that all data are plotted
ans =
    2.4802
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_05.png" %}
</center><p>Here we have made use of our comfortable situation to know the parent orientation. If the parent orientation is unknown we may still estimate the parent to child orientation relationship soleley from the child to child misorientations by the algorithm by Tuomo Nyyss&ouml;nen and implemented in the function <a href="calcParent2Child.html"><code class="language-plaintext highlighter-rouge">calcParent2Child</code></a>. This iterative algorithms needs as a starting point some orientation relation ship no too far from the actual one. Here we use the Nishiyama Wassermann orientation relation ship.</p>
{% highlight matlab %}
% define Nishiyama Wassermann
NW = orientation.NishiyamaWassermann(cs_aus,cs_bcc);

% extract all child to child misorientations
grainPairs = neighbors(grains('Fe'));
ori = grains(grainPairs).meanOrientation;

% estimate a parent to child orientation relationship
p2cIter = calcParent2Child(ori,NW)

% the mean angular deviation
mean(angle(mori,p2cIter)) ./degree
{% endhighlight %}

{% highlight plaintext %}
p2cIter = misorientation  
  size: 1 x 1
  crystal symmetry : Austenite (m-3m)
  crystal symmetry : Ferrite, bcc (m-3m)
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  182.656 97.8759 46.3861       0
 
ans =
    2.4837
{% endhighlight %}
<p>We observe that the parent to child orientation relationship computed solely from the child to child misorientations fits the actual orientation relationship equaly well.</p><h2 id="11">Classification of child variants</h2><p>Once we have determined parent orientations and a parent to child orientation relationship we may proceed further by classifying the child orientations into different variants. This is computed by the command <a href="calcChildVariant.html"><code class="language-plaintext highlighter-rouge">calcChildVariant</code></a>.</p>
{% highlight matlab %}
% compute for each child orientation a variantId
[variantId, packetId] = calcChildVariant(parenOri,childOri,p2cIter);

% colorize the orientations according to the variantID
color = ind2color(variantId);
plotPDF(childOri,color,h_bcc,'MarkerSize',5);
{% endhighlight %}

{% highlight plaintext %}
I'm plotting 208 random orientations out of 3886 given orientations
  You can specify the the number points by the option "points".
  The option "all" ensures that all data are plotted
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_06.png" %}
</center><p>While it is very hard to distinguish the different variants in the pole figure plots it becomes more clear in an axis angle plot</p>
{% highlight matlab %}
plot(childOri,color,'axisAngle')
{% endhighlight %}

{% highlight plaintext %}
plot 2000 random orientations out of 3886 given orientations
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_07.png" %}
</center><p>A more important classification is the seperation of the variants into packets.</p>
{% highlight matlab %}
color = ind2color(packetId);
plotPDF(childOri,color,h_bcc,'MarkerSize',5,'points',1000);

nextAxis(1)
hold on
opt = {'MarkerFaceColor','none','MarkerEdgeColor','k','linewidth',3};
plot(parenOri * h_fcc(1).symmetrise ,opt{:})
xlabel('\((100)\)','Color','red','Interpreter','latex')

nextAxis(2)
plot(parenOri * h_fcc(3).symmetrise ,opt{:})
xlabel('\((111)\)','Color','red','Interpreter','latex')

nextAxis(3)
plot(parenOri * h_fcc(2).symmetrise ,opt{:})
xlabel('\((110)\)','Color','red','Interpreter','latex')
hold off

drawNow(gcm)
{% endhighlight %}

{% highlight plaintext %}
I'm plotting 1000 random orientations out of 3886 given orientations
  You can specify the the number points by the option "points".
  The option "all" ensures that all data are plotted
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_08.png" %}
</center><p>As we can see from the above pole figures the red, blue, orange and green orientations are distinguished by which of the symmetrically equivalent (111) austenite axes is aligned to the (110) martensite axis.</p><p>We may also use the packet color to distinguish different Martensite packets in the EBSD map.</p>
{% highlight matlab %}
plot(grains('Fe'),color)
{% endhighlight %}
<center>
{% include inline_image.html file="MartensiteVariants_09.png" %}
</center></div></body></html>