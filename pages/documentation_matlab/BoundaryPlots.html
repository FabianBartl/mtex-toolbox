---
title: Boundary Plots
last_updated: 07-Oct-2019
sidebar: documentation_sidebar
permalink: BoundaryPlots.html
folder: documentation
toc: false
---

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Boundary Plots</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-10-06"><meta name="DC.source" content="script_BoundaryPlots.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit BoundaryPlots into the Matlab commandline">edit page</a></font><div><!--introduction--><!--/introduction--><p>Here we describe how to visualize grain boundary properties, e.g., misorientation angle, misorientation axes. Therefore lets start by importing some EBSD data and reconstructing the grain structure.</p><pre class="codeinput">close <span class="string">all</span>; plotx2east

<span class="comment">% import the data</span>
mtexdata <span class="string">forsterite</span>

<span class="comment">% restrict it to a subregion of interest.</span>
ebsd = ebsd(inpolygon(ebsd,[5 2 10 5]*10^3));

[grains,ebsd.grainId] = calcGrains(ebsd(<span class="string">'indexed'</span>));

<span class="comment">% remove very small grains</span>
ebsd(grains(grains.grainSize&lt;=5)) = [];

<span class="comment">% and recompute grains</span>
[grains,ebsd.grainId] = calcGrains(ebsd(<span class="string">'indexed'</span>));

<span class="comment">% smooth the grains a bit</span>
grains = smooth(grains,4);
</pre><pre class="codeoutput"> 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     0   58485 (24%)  notIndexed                                                 
     1  152345 (62%)  Forsterite  LightSkyBlue       mmm                         
     2   26058 (11%)   Enstatite  DarkSeaGreen       mmm                         
     3   9064 (3.7%)    Diopside     Goldenrod     12/m1       X||a*, Y||b*, Z||c
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 
</pre><p>The grain boundary segments of a list of grains are stored within the field</p><pre class="codeinput">gB = grains.boundary
</pre><pre class="codeoutput"> 
gB = grainBoundary  
 
 Segments   mineral 1   mineral 2
      439  notIndexed  Forsterite
       18  notIndexed   Enstatite
       22  notIndexed    Diopside
     1386  Forsterite  Forsterite
      656  Forsterite   Enstatite
      519  Forsterite    Diopside
       35   Enstatite   Enstatite
      112   Enstatite    Diopside
       28    Diopside    Diopside
</pre><p>We may use the <a href="grainBoundary.plot.html">plot</a> command to visualize the grain boundaries in the map</p><pre class="codeinput"><span class="comment">% plot phases and grain boundaries</span>
plot(ebsd)
hold <span class="string">on</span>
plot(gB,<span class="string">'lineWidth'</span>,2)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="BoundaryPlots_01.png" %}
<h2 id="4">Specific boundaries</h2><p>Accordingly, we can access the grain boundary of a specific grain by</p><pre class="codeinput">grains(45).boundary

<span class="comment">% lets highlight this specific grain by its boundary</span>
hold <span class="string">on</span>
plot(grains(45).boundary,<span class="string">'lineWidth'</span>,4,<span class="string">'lineColor'</span>,<span class="string">'DarkBlue'</span>)
hold <span class="string">off</span>
</pre><pre class="codeoutput"> 
ans = grainBoundary  
 
 Segments   mineral 1   mineral 2
      132  Forsterite  Forsterite
       69  Forsterite   Enstatite
       29  Forsterite    Diopside
</pre>
  {% include inline_image.html file="BoundaryPlots_02.png" %}
<p>For a multi-phase system, the location of specific phase transistions may be of interest. The following plot highlights all Forsterite to Enstatite phase transitions</p><pre class="codeinput">hold <span class="string">on</span>
plot(grains.boundary(<span class="string">'Fo'</span>,<span class="string">'En'</span>),<span class="string">'linecolor'</span>,<span class="string">'DarkGreen'</span>,<span class="string">'linewidth'</span>,4)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="BoundaryPlots_03.png" %}
<p>Another type of boundaries is boundaries between measurements that belong to the same grain. This happens if a grain has a texture gradient that loops around these two measurements.</p><pre class="codeinput">hold <span class="string">on</span>
plot(grains.innerBoundary,<span class="string">'linecolor'</span>,<span class="string">'red'</span>,<span class="string">'linewidth'</span>,4)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="BoundaryPlots_04.png" %}
<h2 id="7">Misorientation angle</h2><p>The boundary misorientation is the misorientation between the two neighboring pixels of a boundary segment. Depending of the misorientation angle one distinguishes between high angle and low angle grain boundaries. In MTEX we can visualize the boundary misorientation angle by the commands</p><pre class="codeinput">close <span class="string">all</span>
gB_Fo = grains.boundary(<span class="string">'Fo'</span>,<span class="string">'Fo'</span>);
plot(grains,<span class="string">'translucent'</span>,1,<span class="string">'micronbar'</span>,<span class="string">'off'</span>)
legend <span class="string">off</span>
hold <span class="string">on</span>
plot(gB_Fo,gB_Fo.misorientation.angle./degree,<span class="string">'linewidth'</span>,4)
hold <span class="string">off</span>
mtexColorbar(<span class="string">'title'</span>,<span class="string">'misorientation angle'</span>)
</pre>
  {% include inline_image.html file="BoundaryPlots_05.png" %}
<h2 id="8">The misorientation axes in crystal coordinates</h2><p>Similarly as the rotational angle we may colorize the grain boundaries also according the misorientation axes. First of all we have to decide wheter we want to visualize the rotational axis in crystal or coordinate system. Second we have to define a color key that translates rotational axes into colors.</p><p>Lets start with the rotational axes in crystal coordinates</p><pre class="codeinput"><span class="comment">% computed the axes in specien coordinates</span>
axes = gB_Fo.misorientation.axis

<span class="comment">% define a color key</span>
colorKey = HSVDirectionKey(axes);

<span class="comment">% compute colors</span>
color = colorKey.direction2color(axes);

hold <span class="string">on</span>
plot(gB_Fo,<span class="string">'lineColor'</span>,<span class="string">'black'</span>,<span class="string">'linewidth'</span>,6) <span class="comment">% some black background for contrast</span>
plot(gB_Fo,color,<span class="string">'linewidth'</span>,4)
hold <span class="string">off</span>
mtexColorbar(<span class="string">'off'</span>)
</pre><pre class="codeoutput"> 
axes = Miller  
 size: 1386 x 1
 mineral: Forsterite (mmm)
</pre>
  {% include inline_image.html file="BoundaryPlots_06.png" %}
<p>As a colorbar replacement we plot the color key and on top of it the misorientation axes at the grain boundaries</p><pre class="codeinput">figure(2)
plot(colorKey)
hold <span class="string">on</span>
plot(axes,<span class="string">'MarkerFaceAlpha'</span>,0.1,<span class="string">'MarkerEdgeAlpha'</span>,0.3)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="BoundaryPlots_07.png" %}
<h2 id="10">The misorientation axes in specimen coordinates</h2><p>Analyzing the misorientation axis in specimen coordinates is a bit more involved as it requires to extract the two neighbouring orientations to each boundary segment. To do this we use the <b>ebsdId</b> stored in the boundary segments.</p><pre class="codeinput">figure(1)

<span class="comment">% first we reduce the number of boundary segments a bit</span>
<span class="comment">% in order to avoid that the plot becomes to messy</span>
gB_red = reduce(gB_Fo,5)

<span class="comment">% next we extract for every boundary segment the two orientations at both</span>
<span class="comment">% sides</span>
ori = ebsd(<span class="string">'id'</span>,gB_red.ebsdId).orientations

<span class="comment">% the two orientations we use to compute the misorientation axis in</span>
<span class="comment">% specimen coordinates</span>
axes = axis(ori(:,1),ori(:,2))

<span class="comment">% plot the projection of the misorientation axis on the measurement surface</span>
hold <span class="string">on</span>
quiver(gB_red,axes,<span class="string">'autoScaleFactor'</span>,0.4,<span class="string">'color'</span>,<span class="string">'black'</span>)
hold <span class="string">off</span>
</pre><pre class="codeoutput"> 
gB_red = grainBoundary  
 
 Segments   mineral 1   mineral 2
      278  Forsterite  Forsterite
 
ori = orientation  
  size: 278 x 2
  crystal symmetry : Forsterite (mmm)
  specimen symmetry: 1
 
 
axes = vector3d  
 size: 278 x 1
</pre>
  {% include inline_image.html file="BoundaryPlots_08.png" %}
<h2 id="11">Full Misorientation Colorization</h2><p>In order to visuale the full misorientation, i.e., axis and angle, one has to define a corresponding color key. One option is the color key described in the paper by S. Patala, J. K. Mason, and C. A. Schuh, <tt>Improved representations of misorientation information for grain boundary</tt>, Prog. Mater. Sci., vol. 57, no. 8, pp. 1383-1425, 2012.</p><pre class="codeinput"><span class="comment">% plot the grains</span>
close <span class="string">all</span>
plot(grains,<span class="string">'micronbar'</span>,<span class="string">'off'</span>)
legend <span class="string">off</span>

<span class="comment">% define the color key</span>
colorKey = PatalaColorKey(gB_Fo);

hold <span class="string">on</span>
plot(gB_Fo,<span class="string">'linewidth'</span>,7)
set(gcf,<span class="string">'Renderer'</span>,<span class="string">'painters'</span>)
hold <span class="string">on</span>
plot(gB_Fo,colorKey.orientation2color(gB_Fo.misorientation),<span class="string">'linewidth'</span>,4)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="BoundaryPlots_09.png" %}
<p>Lets visualize the color key as axis angle sections through the misorientation space</p><pre class="codeinput">figure(2)
plot(colorKey)

<span class="comment">% and plot the misorienations on top</span>
hold <span class="string">on</span>
plot(gB_Fo.misorientation,<span class="string">'MarkerFacecolor'</span>,<span class="string">'black'</span>)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="BoundaryPlots_10.png" %}
</div></body></html>