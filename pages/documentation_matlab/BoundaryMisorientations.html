---
title: Misorientations at grain boundaries
last_updated: 29-Sep-2019
sidebar: documentation_sidebar
permalink: BoundaryMisorientations.html
folder: documentation
toc: false
---

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Misorientations at grain boundaries</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-09-29"><meta name="DC.source" content="script_BoundaryMisorientations.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit BoundaryMisorientations into the Matlab commandline">edit page</a></font><div><!--introduction--><p>Analyse misorientations along grain boundaries</p><p>This example explains how to analyse boundary misorientation by means of misorientation axes</p><!--/introduction--><h2 id="1">Import EBSD data and select a subregion</h2><p>First step is as always to import the data. Here we restrict the big data set to a subregion to make the results easier to visulize</p><pre class="codeinput"><span class="comment">% take some MTEX data set</span>
mtexdata <span class="string">forsterite</span>
plotx2east

<span class="comment">% define a sub region</span>
xmin = 25000;
xmax = 35000;
ymin = 4500;
ymax = 9000;

region = [xmin ymin xmax-xmin ymax-ymin];

<span class="comment">% visualize the whole data set</span>
plot(ebsd)
<span class="comment">% and marke the sub region</span>
rectangle(<span class="string">'position'</span>,region,<span class="string">'edgecolor'</span>,<span class="string">'r'</span>,<span class="string">'linewidth'</span>,2)

<span class="comment">% select EBSD data within region</span>
condition = inpolygon(ebsd,region); <span class="comment">% select indices by polygon</span>
ebsd = ebsd(condition);
</pre>
  {% include inline_image.html file="BoundaryMisorientations_01.png" %}
<h2 id="2">Grain modelling</h2><p>Second step is the modelling of the grains and grain boundaries</p><pre class="codeinput"><span class="comment">% segmentation angle typically 10 to 15 degrees that seperates to grains</span>
seg_angle = 10;

<span class="comment">% minimum indexed points per grain between 5 and 10</span>
min_points = 10;

<span class="comment">% restrict to indexed only points</span>
[grains,ebsd.grainId,ebsd.mis2mean] = calcGrains(ebsd(<span class="string">'indexed'</span>),<span class="string">'angle'</span>,seg_angle*degree);

<span class="comment">% remove small grains with less than min_points indexed points</span>
grains = grains(grains.grainSize &gt; min_points);

<span class="comment">% re-calculate grain model to cleanup grain boundaries with less than</span>
<span class="comment">% minimum index points used ebsd points within grains having the minium</span>
<span class="comment">% indexed number of points (e.g. 10 points)</span>
ebsd = ebsd(grains);
[grains,ebsd.grainId,ebsd.mis2mean] = calcGrains(ebsd(<span class="string">'indexed'</span>),<span class="string">'angle'</span>,seg_angle*degree);

<span class="comment">% smooth grains</span>
grains = smooth(grains,4);

<span class="comment">% plot the data</span>
<span class="comment">% Note, only the forsterite grains are colorred. Grains with different</span>
<span class="comment">% phase remain white</span>
plot(grains(<span class="string">'fo'</span>),grains(<span class="string">'fo'</span>).meanOrientation,<span class="string">'micronbar'</span>,<span class="string">'off'</span>,<span class="string">'figSize'</span>,<span class="string">'large'</span>)
hold <span class="string">on</span>
plot(grains.boundary)
hold <span class="string">off</span>
</pre><pre class="codeoutput">  I'm going to colorize the orientation data with the 
  standard MTEX colorkey. To view the colorkey do:
 
  colorKey = ipfColorKey(ori_variable_name)
  plot(colorKey)
</pre>
  {% include inline_image.html file="BoundaryMisorientations_02.png" %}
<h2 id="3">Visualize the misorientation angle at grain boundaries</h2><pre class="codeinput"><span class="comment">% define the linewidth</span>
lw = 6;

<span class="comment">% consider on Fo-Fo boundaries</span>
gB = grains.boundary(<span class="string">'Fo'</span>,<span class="string">'Fo'</span>);

<span class="comment">% The following command reorders the boundary segments such that they are</span>
<span class="comment">% connected. This has two advantages:</span>
<span class="comment">% 1. the plots become more smooth</span>
<span class="comment">% 2. you can consider every third line segment as we do in the next paragraph</span>
gB = gB.reorder;

<span class="comment">% visualize the misorientation angle</span>
<span class="comment">% draw the boundary in black very thick</span>
hold <span class="string">on</span>
plot(gB,<span class="string">'linewidth'</span>,lw+2);

<span class="comment">% and on top of it the boundary colorized according to the misorientation</span>
<span class="comment">% angle</span>
hold <span class="string">on</span>
plot(gB,gB.misorientation.angle./degree,<span class="string">'linewidth'</span>,lw);
hold <span class="string">off</span>
mtexColorMap <span class="string">jet</span>
mtexColorbar(<span class="string">'title'</span>,<span class="string">'misorientation angle in degrees'</span>)
</pre>
  {% include inline_image.html file="BoundaryMisorientations_03.png" %}
<h2 id="4">Visualize the misorientation axes in specimen coordinates</h2><p>Computing the misorientation axes in specimen coordinates can not be done using the boundary misorientations only. In fact, we require the orientations on both sides of the grain boundary. Lets extract them first.</p><pre class="codeinput"><span class="comment">% do only consider every third boundary segment</span>
Sampling_N=3;
gB = gB(1:Sampling_N:end);

<span class="comment">% the following command gives an Nx2 matrix of orientations which contains</span>
<span class="comment">% for each boundary segment the orientation on both sides of the boundary.</span>
ori = ebsd(<span class="string">'id'</span>,gB.ebsdId).orientations;

<span class="comment">% the misorientation axis in specimen coordinates</span>
gB_axes = axis(ori(:,1),ori(:,2));

<span class="comment">% axes can be plotted using the command quiver</span>
hold <span class="string">on</span>
quiver(gB,gB_axes,<span class="string">'linewidth'</span>,1,<span class="string">'color'</span>,<span class="string">'k'</span>,<span class="string">'autoScaleFactor'</span>,0.3)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="BoundaryMisorientations_04.png" %}
<p>Note, the shorter the axes the more they stick out of the surface. What may be a bit surprising is that the misorientations axes have some abrupt changes at the left hands side grain boundary. The reason for this is that the misorientations angle at this boundary is close to the maximum misorientation angle of 120 degree. As a consequence, slight changes in the misorientation may leed to a completely different disorientation, i.e., a different but symmetrically equivalent misorientation has a smaller misorientation angle.</p></div></body></html>