---
title: Properties of Three-Dimensional Grains

sidebar: documentation_sidebar
permalink: Grains3DProperties.html
folder: documentation
toc: false
---
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
    -->
<title>Properties of Three-Dimensional Grains</title>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.source" content="script_Grains3DProperties.m">
</head>
<body>
<font size="2"><a href="https://github.com/mtex-toolbox/mtex/blob/develop/doc/EBSD3Analysis/Grains3DProperties.m">
    edit page</a></font>
<div>
<!--introduction-->
<p>Three dimensional grain share many of the properties of two dimensional grains, e.g. <code class="language-plaintext highlighter-rouge">grains.meanOrientation</code>. However, the geometric properties are quite different. These are</p>
<p>
   <table class="usertable">
      <tr>
         <td>
               <p>
                  <tt>grainSize</tt>
               </p>
         </td>
         <td>
               <p>number of pixels per grain</p>
         </td>
         <td>
               <p>
                  <tt>volume</tt>
               </p>
         </td>
         <td>
               <p>volume in µm³</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <tt>numFaces</tt>
               </p>
         </td>
         <td>
               <p>number boundary elements per grain</p>
         </td>
         <td>
               <p>
                  <a href="grain3d.surface.html">
                     <tt>surface</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>surface area in µm²</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain3d.diameter.html">
                     <tt>diameter</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>diameter in µm</p>
         </td>
         <td>
               <p>
                  <tt>caliper</tt>
               </p>
         </td>
         <td>
               <p>not yet implemented</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain3d.equivalentPerimeter.html">
                     <tt>equivalentPerimeter</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>perimeter of a circle with the same area</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.equivalentRadius.html">
                     <tt>equivalentRadius</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>radius of a circle with the same area</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain3d.shapeFactor.html">
                     <tt>shapeFactor</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>perimeter / equivalent perimeter</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.isBoundary.html">
                     <tt>isBoundary</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>is it a boundary grain</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain3d.hasHole.html">
                     <tt>hasHole</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>TODO</p>
         </td>
         <td>
               <p>
                  <a href="grain3d.isInclusion.html">
                     <tt>isInclusion</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>TODO</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain3d.numNeighbors.html">
                     <tt>numNeighbors</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>number neighboring grains</p>
         </td>
         <td>
               <p>
                  <a href="grain3Boundary.grain3Boundary.html">
                     <tt>boundary</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>list of boundary faces</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <tt>grains.V</tt>
               </p>
         </td>
         <td>
               <p>vertices</p>
         </td>
         <td>
               <p>
                  <a href="grain3d.centroid.html">
                     <tt>centroid</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>the geometric center</p>
         </td>
      </tr>
   </table>
</p>
<!--/introduction-->
<p>We start our discussion by importing some sample data set of three dimensional grains</p>
{% highlight matlab %}
mtexdata sampleGrains3d
grains.color = 'lightblue'

plot(grains,grains.meanOrientation,'micronbar','off')

% set camera
zoom(0.8)
how2plot = plottingConvention;
how2plot.outOfScreen = vector3d(-10,-5,2);
how2plot.east = vector3d(1,-2,0);
setCamera(how2plot)
{% endhighlight %}

{% highlight plaintext %}
grains = grain3d
 
 Phase  Grains   Volume  Mineral  Symmetry  Crystal reference frame
     2    1000  1000000   Quartz       321       X||a*, Y||b, Z||c*
 
 boundary faces: 7203
 
 <strong>Properties</strong>: meanRotation
 
 
grains = grain3d
 
 Phase  Grains   Volume  Mineral  Symmetry  Crystal reference frame
     2    1000  1000000   Quartz       321       X||a*, Y||b, Z||c*
 
 boundary faces: 7203
 
 <strong>Properties</strong>: meanRotation
{% endhighlight %}
<center>
{% include inline_image.html file="Grains3DProperties_01.png" %}
</center>
<h2 id="2">Grain volume</h2>
<p>The most basic properties are diameter, surface and volume. Those can be computed by</p>
{% highlight matlab %}
grains(9).diameter
{% endhighlight %}

{% highlight plaintext %}
ans =
   19.4556
{% endhighlight %}

{% highlight matlab %}
grains(9).surface
{% endhighlight %}

{% highlight plaintext %}
ans =
  765.9084
{% endhighlight %}

{% highlight matlab %}
grains(9).volume
{% endhighlight %}

{% highlight plaintext %}
ans =
   1.4318e+03
{% endhighlight %}
<p>The units are &micro;m, &micro;m&sup2; and &micro;m&sup3;. We may analyze the distribution of grains by grain volume using a histogram.</p>
{% highlight matlab %}
close all
histogram(grains.volume,20,'FaceColor',grains.color)
xlabel('grain volume in µm³')
ylabel('number of grains')
{% endhighlight %}
<center>
{% include inline_image.html file="Grains3DProperties_02.png" %}
</center>
<p>Note that in the above histogram all grains contribute equally independently of their size. We obtain a more realistic histogram if we do not plot the number of grains at the y-axis but its total volume. This can be achieved with the command <a href="grain3d.histogram.html"><code class="language-plaintext highlighter-rouge">histogram(grains)</code></a>.</p>
{% highlight matlab %}
histogram(grains,20)
{% endhighlight %}
<center>
{% include inline_image.html file="Grains3DProperties_03.png" %}
</center>
<p>Similarly, we can visualize the distribution of surface or diameter with respect to grain volume or number of grains.</p>
{% highlight matlab %}
histogram(grains.surface,'FaceColor',grains.color)
xlabel('surface (µm²)')
ylabel('number of grains')

figure
histogram(grains,grains.surface)
xlabel('surface (µm²)')
{% endhighlight %}
<center>
{% include inline_image.html file="Grains3DProperties_04.png" %}
</center>
<center>
{% include inline_image.html file="Grains3DProperties_05.png" %}
</center>
<p>We may also investigate the correlation between any properties using a scatter plot. Almost surely, we find a relationship between the grain diameter and the volume.</p>
{% highlight matlab %}
scatter(grains.volume.^(1/3), grains.diameter)
{% endhighlight %}
<center>
{% include inline_image.html file="Grains3DProperties_06.png" %}
</center>
{% highlight matlab %}
grains.numNeighbors
grains.numFaces
{% endhighlight %}

{% highlight plaintext %}
ans =
     7
    17
    15
    14
    15
    11
    10
    10
    17
    20
    10
    17
    13
    12
    19
    11
    14
    12
    16
    15
    19
    17
    11
    13
    10
    12
    18
    12
     7
    12
    14
    12
    13
     9
    12
    12
     8
    13
    14
    19
    11
    13
    20
    11
    22
    14
     7
    11
    17
    10
    16
    12
     9
    16
    12
    15
    11
    17
    13
    10
    14
    12
    10
    21
    12
    15
    13
    13
    14
    14
    11
    10
    16
    11
    15
    20
    17
    10
    13
    11
     9
     8
    19
    17
    14
    14
    12
    17
    13
     6
    13
    16
    11
    12
    13
    13
    16
    17
    11
    15
    18
    22
    16
    16
     7
    20
    14
    15
    14
    16
    12
     6
    14
    12
    17
     7
    18
     9
    10
    13
    17
    17
     9
    19
     8
    15
    16
    14
    14
    19
    14
     7
    16
    15
    12
    13
    10
     9
    13
    20
    13
     7
    15
    11
    12
    14
    14
    18
    10
    13
    14
    16
     8
    13
    18
    12
    11
    12
    14
    13
    16
     5
     9
    16
    20
    13
    10
    15
    17
     9
    11
     6
    10
    11
     8
    14
    13
    13
    16
    11
    17
     9
    16
    12
    13
    19
    16
    17
    17
    13
    16
    12
    10
    17
     9
    15
     6
     7
    14
    18
     7
    18
    11
    19
    14
    14
    18
    13
    10
    11
    12
    10
    11
    10
    15
    19
    11
    12
    15
    23
     5
    10
    17
     8
    18
    16
     9
    11
    11
    13
    11
    15
     8
    19
    15
    12
    13
     8
    11
    13
    13
    10
    15
    14
    12
    15
    15
    12
    13
    17
    16
    12
    16
    12
    15
    19
    14
    11
    18
    13
    15
    14
    19
    12
     9
    18
    12
    15
    10
    12
    21
    16
    18
    11
    12
     9
    19
    10
    22
    15
    15
    16
     8
    16
    14
    11
    12
    16
    17
    14
    13
    11
     9
     9
    16
    21
     7
    20
     9
    14
    17
    18
    13
    19
    15
    12
    18
    14
    27
    17
    14
     9
    15
    11
     6
    13
    19
    15
    17
    11
    18
    15
    14
    15
    10
    22
    20
     9
    11
    13
    12
     9
    11
    16
    17
    15
    20
     6
     7
    13
    15
    18
    20
    14
    10
    14
    16
     9
    11
    16
    16
    10
    16
     9
    19
    16
    10
    15
    16
    13
    19
    19
    15
    13
    14
    12
    14
    20
    13
    12
     8
     8
    19
    17
    11
    10
    12
    15
    13
    16
    21
    11
    13
    12
    10
     5
    11
     9
    11
     9
    11
    11
    15
    15
     8
    12
    17
    11
    13
    15
    15
    18
    13
    16
    16
     8
    10
     9
    18
    14
    13
    10
     9
     9
    10
    12
     9
    15
    21
    18
    12
     5
    19
    10
     8
    11
    19
    14
    20
    14
    15
    12
     7
     5
    10
    13
    10
     7
    10
    16
    18
    17
    10
     7
    15
    11
    14
    21
     8
    10
    10
    12
    14
    13
    18
    17
    15
    14
     9
     8
    12
    18
     9
    11
    11
    13
     9
     7
    12
    19
    11
    12
    14
    16
     8
    12
    21
    12
    14
    20
    16
    10
    12
    11
     6
    11
    16
    14
    13
    19
    14
    11
    16
     6
    16
    17
    17
    12
    13
    11
    14
    13
    15
    13
    11
    13
    15
    12
    14
    16
    20
    11
    15
     9
    16
    11
    17
    12
    14
    14
    11
     7
    12
    12
    11
    11
    16
    15
    15
    14
    10
     9
    16
    13
    12
    17
    18
    17
    12
    10
    11
    11
    16
     8
    14
    12
    17
    16
    13
    20
    14
     9
     9
    18
     6
    15
    21
    16
    16
    16
    12
    14
     9
     7
    16
    17
    18
    11
    12
    10
    14
    12
    14
    14
    16
    10
    12
    11
    14
     9
    10
     7
    14
     8
    16
    18
    11
    17
    15
    14
    15
     9
    12
    10
    13
    10
    15
    13
    16
    12
    11
    13
    12
    15
    11
    15
    11
    19
    18
    12
    13
     6
     9
    16
    13
    19
    14
    10
    10
    10
    12
    12
    14
     9
    13
    21
    13
     9
    13
    13
    15
     8
    19
    12
    13
    17
    15
     8
    14
    11
    15
    18
    17
     6
     9
     7
    13
     8
     7
    13
    12
    15
    10
    12
    14
    14
    13
    17
    13
    13
    11
     7
     8
    10
    12
     9
    14
     6
     9
    12
    15
     3
    10
     9
    10
    11
    19
    17
    10
    20
    16
    14
    10
    19
    13
    16
    11
     9
    13
    13
    13
    16
    15
    12
    14
    11
    11
     8
    18
     9
    13
    17
     8
    14
    12
    11
    13
    17
    16
     7
    10
    10
    17
    10
     9
    16
    12
    17
    22
    16
    10
    14
    23
    11
    13
    15
     9
    12
    15
    12
    15
    12
     8
    11
    15
    15
    12
    16
    11
    16
     7
    20
     8
    10
    15
     8
     6
    19
    18
    11
     9
    14
    11
    14
    12
    19
    14
    10
    11
     8
    20
    14
    14
    13
    10
     7
     9
    17
    17
    12
    21
    22
    15
    12
    13
    11
    17
    12
    15
    14
    19
     8
    10
    19
    15
    19
    10
    10
    12
    16
    15
    11
    21
    17
    11
    15
    16
    12
    15
     8
    17
    12
    17
    16
    10
    12
    12
    11
    14
    14
    13
    12
    10
    19
    16
    11
    18
    14
    14
    13
    15
    16
    11
    14
    15
     9
    19
    16
    18
    14
    20
    10
    15
    16
    14
    11
     8
    15
    19
    13
    17
    11
    11
     8
    13
    15
    13
    15
    12
    11
    12
    13
    13
    17
    13
    13
     8
    11
    18
     9
    11
    18
     8
    11
    25
     8
    17
    16
    18
     7
    14
    11
    12
    18
    14
    14
    10
    14
    13
    14
     7
    13
    14
    22
    12
    22
    14
    11
    12
    11
    20
    14
    13
    19
    14
     7
    10
    11
    13
    20
    18
    12
     9
    16
    13
    18
    13
    14
    15
    19
    18
     6
    11
     9
     7
     9
    20
    16
    18
    13
     8
     9
    10
    17
    11
    19
     9
    13
    13
     8
    16
     9
     8
     9
    18
    17
    16
    13
    21
    10
    11
    12
    19
     9
    16
    13
     9
    19
    20
    12
    14
    24
    16
    14
    19
    12
     7
    20
    17
     8
    18
    16
    22
    14
    10
     9
    15
    15
    15
    11
     9
    15
    10
    16
    12
     9
    14
     8
    13
    14
    18
    15
    15
    19
    20
    10
    11
    12
     8
    21
    11
    19
    12
     7
    13
    11
    15
    15
    11
     8
ans =
     8
    18
    17
    14
    15
    12
    10
    11
    18
    20
    11
    17
    13
    13
    19
    12
    14
    13
    17
    15
    19
    18
    12
    14
    10
    13
    18
    12
     8
    12
    14
    12
    13
    11
    12
    14
     9
    13
    14
    19
    12
    14
    20
    12
    22
    14
     9
    12
    17
    10
    17
    12
     9
    17
    12
    16
    11
    17
    14
    10
    14
    12
    11
    21
    13
    15
    13
    13
    15
    15
    12
    11
    17
    12
    15
    21
    18
    10
    14
    12
     9
    11
    19
    17
    15
    14
    13
    17
    13
     8
    13
    16
    11
    12
    14
    13
    17
    17
    12
    15
    18
    22
    16
    16
     8
    20
    14
    16
    15
    17
    12
     7
    14
    13
    17
     9
    18
    10
    11
    13
    18
    17
    10
    19
    10
    16
    17
    15
    14
    19
    14
    10
    16
    15
    12
    13
    11
    10
    14
    21
    13
     9
    15
    11
    14
    14
    14
    18
    13
    13
    15
    16
     9
    14
    18
    13
    11
    12
    15
    14
    16
     7
    10
    16
    20
    13
    11
    15
    17
    10
    12
     7
    11
    12
     9
    14
    13
    13
    16
    12
    18
    10
    16
    14
    14
    19
    16
    17
    18
    13
    16
    13
    11
    17
    12
    16
     8
     9
    14
    18
     8
    18
    12
    19
    15
    14
    18
    14
    12
    11
    12
    12
    11
    11
    15
    19
    12
    12
    15
    23
     7
    11
    17
     8
    18
    16
    10
    12
    11
    13
    11
    16
     9
    19
    16
    12
    14
    10
    12
    14
    13
    10
    16
    14
    12
    17
    16
    13
    13
    17
    16
    13
    16
    13
    16
    20
    14
    12
    18
    14
    15
    15
    19
    13
    10
    18
    14
    16
    12
    13
    21
    16
    18
    11
    13
    10
    19
    10
    22
    15
    16
    16
     9
    17
    14
    12
    14
    16
    17
    14
    14
    11
    10
     9
    16
    21
     9
    20
    10
    14
    17
    19
    13
    19
    15
    15
    18
    14
    27
    17
    15
    10
    16
    12
     8
    14
    19
    16
    17
    11
    18
    15
    15
    15
    11
    22
    20
    11
    13
    13
    13
    10
    12
    16
    18
    15
    20
     7
     9
    14
    15
    18
    20
    15
    11
    14
    16
     9
    11
    16
    16
    12
    16
    11
    19
    16
    12
    16
    16
    14
    19
    20
    15
    13
    15
    12
    15
    20
    13
    13
     9
     9
    19
    17
    11
    10
    12
    15
    13
    16
    21
    12
    13
    12
    11
     7
    11
    11
    11
     9
    11
    12
    15
    15
    10
    12
    17
    12
    14
    15
    16
    18
    13
    16
    17
    10
    11
    11
    18
    14
    13
    11
    10
    10
    10
    12
    10
    16
    21
    18
    12
     7
    19
    11
    10
    12
    19
    14
    20
    14
    16
    14
     8
     6
    11
    13
    10
     8
    11
    16
    18
    18
    11
     9
    15
    11
    14
    21
     9
    12
    11
    12
    15
    14
    18
    17
    15
    14
    10
     9
    12
    18
    10
    11
    11
    14
     9
     8
    12
    19
    13
    13
    14
    16
    10
    13
    21
    13
    15
    20
    16
    11
    12
    12
     8
    11
    16
    14
    13
    19
    15
    12
    16
     8
    16
    17
    17
    12
    14
    11
    14
    14
    15
    13
    13
    13
    15
    12
    15
    16
    20
    13
    15
    10
    17
    12
    17
    12
    14
    14
    12
     9
    13
    13
    11
    13
    16
    16
    15
    14
    13
    10
    16
    13
    12
    17
    18
    17
    12
    11
    12
    12
    16
     9
    15
    12
    17
    16
    14
    20
    14
    11
    10
    19
     8
    16
    21
    16
    17
    16
    12
    15
    10
     8
    16
    17
    18
    12
    12
    10
    14
    14
    14
    14
    16
    11
    12
    11
    14
    10
    11
     8
    15
     9
    16
    18
    11
    17
    16
    14
    15
    10
    12
    11
    13
    10
    15
    13
    16
    13
    12
    14
    13
    15
    12
    15
    11
    19
    18
    12
    13
     7
    11
    16
    14
    19
    14
    10
    11
    10
    13
    12
    14
    11
    13
    22
    13
     9
    14
    13
    15
     9
    19
    12
    14
    17
    16
     8
    14
    11
    16
    18
    17
     7
    10
     7
    14
    10
     8
    14
    12
    15
    11
    14
    15
    14
    14
    17
    14
    13
    11
     8
     9
    11
    12
     9
    14
     8
    10
    13
    15
     6
    11
    10
    10
    11
    19
    17
    11
    20
    16
    14
    11
    19
    13
    16
    12
    10
    14
    13
    13
    16
    15
    12
    14
    11
    13
     9
    18
    10
    14
    17
     9
    14
    12
    12
    14
    17
    16
     9
    11
    11
    17
    11
    10
    16
    13
    17
    22
    16
    12
    14
    23
    11
    14
    15
     9
    12
    15
    12
    15
    13
     9
    11
    15
    15
    13
    16
    13
    16
     9
    20
    10
    11
    15
     9
     7
    19
    18
    11
    11
    14
    11
    15
    13
    19
    14
    10
    12
     8
    20
    14
    14
    13
    11
     9
    11
    17
    17
    13
    21
    22
    15
    13
    13
    11
    17
    13
    15
    14
    19
    10
    11
    19
    16
    19
    11
    11
    13
    16
    15
    11
    22
    17
    11
    15
    16
    13
    15
     9
    17
    12
    17
    16
    11
    12
    13
    12
    14
    15
    15
    12
    11
    19
    16
    12
    18
    14
    15
    15
    15
    16
    12
    14
    17
    10
    19
    16
    18
    15
    20
    12
    15
    16
    15
    12
    10
    15
    19
    14
    18
    11
    11
     9
    14
    16
    14
    15
    12
    12
    13
    13
    13
    17
    13
    14
    10
    11
    18
    11
    11
    18
    10
    12
    25
     9
    17
    16
    18
    10
    14
    11
    12
    18
    15
    14
    12
    14
    14
    14
     8
    13
    16
    22
    12
    23
    14
    12
    12
    11
    20
    14
    14
    19
    16
     7
    10
    12
    14
    20
    18
    13
    10
    16
    13
    18
    13
    14
    15
    19
    18
     7
    12
    10
     8
    10
    20
    17
    18
    13
     9
    10
    11
    17
    12
    19
     9
    14
    13
     9
    16
    11
     9
    10
    18
    17
    16
    14
    21
    10
    12
    13
    19
    10
    16
    14
    11
    19
    20
    13
    15
    24
    17
    14
    19
    12
     9
    20
    17
     9
    18
    16
    22
    15
    10
    11
    16
    16
    16
    12
     9
    15
    11
    16
    12
    10
    15
     9
    14
    14
    18
    15
    16
    19
    20
    11
    12
    14
     9
    21
    12
    19
    14
    10
    13
    11
    15
    15
    12
     9
{% endhighlight %}
<h2 id="10">Vertices, grain and surface centroids</h2>
<p>Each grain has a set of vertices <code class="language-plaintext highlighter-rouge">grains.V</code> and a centroid <code class="language-plaintext highlighter-rouge">grains.centroid</code>. Furthermore, each grain boundary element has a centroid. Lets visualize those quantities.</p>
{% highlight matlab %}
plot(grains(5),'FaceAlpha',0.5)

hold on
plot(grains(5).centroid)
plot(grains(5).V)
plot(grains(5).boundary.centroid)
hold off
{% endhighlight %}
<center>
{% include inline_image.html file="Grains3DProperties_07.png" %}
</center>
<h2 id="11">Grain boundary properties</h2>
<p>The grain boundary elements the have the following geometric properties</p>
<p>
   <table class="usertable">
      <tr>
         <td>
               <p>
                  <tt>area</tt>
               </p>
         </td>
         <td>
               <p>area in µm²</p>
         </td>
         <td>
               <p>
                  <tt>N</tt>
               </p>
         </td>
         <td>
               <p>normal direction</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <tt>diameter</tt>
               </p>
         </td>
         <td>
               <p>diameter in µm</p>
         </td>
         <td>
               <p>
                  <tt>perimeter</tt>
               </p>
         </td>
         <td>
               <p>perimeter in µm</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <tt>curvature</tt>
               </p>
         </td>
         <td>
               <p>TODO</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <tt>grainId</tt>
               </p>
         </td>
         <td>
               <p>neighboring grain ids</p>
         </td>
         <td>
               <p>
                  <tt>misorientation</tt>
               </p>
         </td>
         <td>
               <p>misorientation</p>
         </td>
      </tr>
   </table>
</p>
{% highlight matlab %}
close all
plot(grains.boundary('indexed'),...
  grains.boundary('indexed').misorientation.angle./degree,'micronbar','off')

setCamera(how2plot)
colorbar('location','southoutside')
{% endhighlight %}
<center>
{% include inline_image.html file="Grains3DProperties_08.png" %}
</center>
</div>
</body>
</html>
