---
title: Average Material Tensors
last_updated: 05-Oct-2019
sidebar: documentation_sidebar
permalink: TensorsAverage.html
folder: documentation
toc: false
---

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Average Material Tensors</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-10-05"><meta name="DC.source" content="script_TensorsAverage.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit TensorsAverage into the Matlab commandline">edit page</a></font><div><!--introduction--><!--/introduction--><p>MTEX offers several ways to compute average material tensors from ODFs or EBSD data. We start by importing some EBSD data of Glaucophane and Epidote.</p><pre class="codeinput"><span class="comment">% set up a nice colormap</span>
setMTEXpref(<span class="string">'defaultColorMap'</span>,blue2redColorMap);

<span class="comment">% import some EBSD data</span>
ebsd = EBSD.load([mtexDataPath <span class="string">'/EBSD/data.ctf'</span>],<span class="keyword">...</span>
  <span class="string">'convertEuler2SpatialReferenceFrame'</span>);

<span class="comment">% visualize a subset of the data</span>

plot(ebsd(inpolygon(ebsd,[2000 0 1400 375])))
</pre>
  {% include inline_image.html file="TensorsAverage_01.png" %}
<h2 id="2">Data Correction</h2><p>next, we correct the data by excluding orientations with large MAD value</p><pre class="codeinput"><span class="comment">% define maximum acceptable MAD value</span>
MAD_MAXIMUM= 1.3;

<span class="comment">% eliminate all meassurements with MAD larger than MAD_MAXIMUM</span>
ebsd(ebsd.mad &gt;MAD_MAXIMUM) = []

plot(ebsd(inpolygon(ebsd,[2000 0 1400 375])))
</pre><pre class="codeoutput"> 
ebsd = EBSD  
 
 Phase  Orientations      Mineral         Color  Symmetry  Crystal reference frame
     0   28015 (56%)   notIndexed                                                 
     1   13779 (28%)  Glaucophane  LightSkyBlue     12/m1       X||a*, Y||b*, Z||c
     2   4510 (9.1%)      Epidote  DarkSeaGreen     12/m1       X||a*, Y||b*, Z||c
     3   3212 (6.5%)       Pyrope     Goldenrod      m-3m                         
     4   218 (0.44%)    omphacite    LightCoral     12/m1       X||a*, Y||b*, Z||c
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 
</pre>
  {% include inline_image.html file="TensorsAverage_02.png" %}
<h2 id="3">Define Elastic Stiffness Tensors for Glaucophane and Epidote</h2><p>Glaucophane elastic stiffness (Cij) Tensor in GPa Bezacier, L., Reynard, B., Bass, J.D., Wang, J., and Mainprice, D. (2010) Elasticity of glaucophane and seismic properties of high-pressure low-temperature oceanic rocks in subduction zones. Tectonophysics, 494, 201-210.</p><pre class="codeinput"><span class="comment">% define the tensor coefficients</span>
MGlaucophane =<span class="keyword">...</span><span class="comment">.</span>
  [[122.28   45.69   37.24   0.00   2.35   0.00];<span class="keyword">...</span>
  [  45.69  231.50   74.91   0.00  -4.78   0.00];<span class="keyword">...</span>
  [  37.24   74.91  254.57   0.00 -23.74   0.00];<span class="keyword">...</span>
  [   0.00    0.00    0.00  79.67   0.00   8.89];<span class="keyword">...</span>
  [   2.35   -4.78  -23.74   0.00  52.82   0.00];<span class="keyword">...</span>
  [   0.00    0.00    0.00   8.89   0.00  51.24]];

<span class="comment">% define the reference frame</span>
csGlaucophane = crystalSymmetry(<span class="string">'2/m'</span>,[9.5334,17.7347,5.3008],<span class="keyword">...</span>
  [90.00,103.597,90.00]*degree,<span class="string">'X||a*'</span>,<span class="string">'Z||c'</span>,<span class="string">'mineral'</span>,<span class="string">'Glaucophane'</span>);

<span class="comment">% define the tensor</span>
CGlaucophane = stiffnessTensor(MGlaucophane,csGlaucophane)
</pre><pre class="codeoutput"> 
CGlaucophane = stiffnessTensor  
  unit   : GPa                                    
  rank   : 4 (3 x 3 x 3 x 3)                      
  mineral: Glaucophane (12/m1, X||a*, Y||b*, Z||c)
 
  tensor in Voigt matrix representation:
 122.28  45.69  37.24      0   2.35      0
  45.69  231.5  74.91      0  -4.78      0
  37.24  74.91 254.57      0 -23.74      0
      0      0      0  79.67      0   8.89
   2.35  -4.78 -23.74      0  52.82      0
      0      0      0   8.89      0  51.24
</pre><p>Epidote elastic stiffness (Cij) Tensor in GPa Aleksandrov, K.S., Alchikov, U.V., Belikov, B.P., Zaslavskii, B.I. and Krupnyi, A.I.: 1974 'Velocities of elastic waves in minerals at atmospheric pressure and increasing the precision of elastic constants by means of EVM (in Russian)', Izv. Acad. Sci. USSR, Geol. Ser.10, 15-24.</p><pre class="codeinput"><span class="comment">% define the tensor coefficients</span>
MEpidote =<span class="keyword">...</span><span class="comment">.</span>
  [[211.50    65.60    43.20     0.00     -6.50     0.00];<span class="keyword">...</span>
  [  65.60   239.00    43.60     0.00    -10.40     0.00];<span class="keyword">...</span>
  [  43.20    43.60   202.10     0.00    -20.00     0.00];<span class="keyword">...</span>
  [   0.00     0.00     0.00    39.10      0.00    -2.30];<span class="keyword">...</span>
  [  -6.50   -10.40   -20.00     0.00     43.40     0.00];<span class="keyword">...</span>
  [   0.00     0.00     0.00    -2.30      0.00    79.50]];

<span class="comment">% define the reference frame</span>
csEpidote= crystalSymmetry(<span class="string">'2/m'</span>,[8.8877,5.6275,10.1517],<span class="keyword">...</span>
  [90.00,115.383,90.00]*degree,<span class="string">'X||a*'</span>,<span class="string">'Z||c'</span>,<span class="string">'mineral'</span>,<span class="string">'Epidote'</span>);

<span class="comment">% define the tensor</span>
CEpidote = stiffnessTensor(MEpidote,csEpidote)
</pre><pre class="codeoutput"> 
CEpidote = stiffnessTensor  
  unit   : GPa                                
  rank   : 4 (3 x 3 x 3 x 3)                  
  mineral: Epidote (12/m1, X||a*, Y||b*, Z||c)
 
  tensor in Voigt matrix representation:
 211.5  65.6  43.2     0  -6.5     0
  65.6   239  43.6     0 -10.4     0
  43.2  43.6 202.1     0   -20     0
     0     0     0  39.1     0  -2.3
  -6.5 -10.4   -20     0  43.4     0
     0     0     0  -2.3     0  79.5
</pre><h2 id="5">The Average Tensor from EBSD Data</h2><p>The Voigt, Reuss, and Hill averages for all phases are computed by</p><pre class="codeinput">[CVoigt,CReuss,CHill] =  calcTensor(ebsd({<span class="string">'Epidote'</span>,<span class="string">'Glaucophane'</span>}),CGlaucophane,CEpidote)
</pre><pre class="codeoutput"> 
CVoigt = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation: *10^-3
 11.852  2.893  3.712 -0.107  -0.23  0.284
  2.893  8.642  2.982 -0.185 -0.025  0.135
  3.712  2.982 11.306 -0.398  -0.13  0.094
 -0.107 -0.185 -0.398  3.329   0.12 -0.045
  -0.23 -0.025  -0.13   0.12  4.118 -0.086
  0.284  0.135  0.094 -0.045 -0.086  3.336
 
CReuss = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation: *10^-3
 10.812  2.657  3.316 -0.094 -0.233  0.258
  2.657  7.931  2.732 -0.157 -0.021  0.111
  3.316  2.732 10.302 -0.345  -0.12  0.077
 -0.094 -0.157 -0.345  3.024  0.119 -0.033
 -0.233 -0.021  -0.12  0.119  3.814 -0.088
  0.258  0.111  0.077 -0.033 -0.088  3.029
 
CHill = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation: *10^-3
 11.332  2.775  3.514   -0.1 -0.231  0.271
  2.775  8.286  2.857 -0.171 -0.023  0.123
  3.514  2.857 10.804 -0.372 -0.125  0.086
   -0.1 -0.171 -0.372  3.176   0.12 -0.039
 -0.231 -0.023 -0.125   0.12  3.966 -0.087
  0.271  0.123  0.086 -0.039 -0.087  3.182
</pre><p>for a single phase the syntax is</p><pre class="codeinput">[CVoigtEpidote,CReussEpidote,CHillEpidote] =  calcTensor(ebsd(<span class="string">'Epidote'</span>),CEpidote)
</pre><pre class="codeoutput"> 
CVoigtEpidote = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation: *10^-3
 46.61  12.5 15.17 -0.33 -0.59  0.95
  12.5 39.33 12.67     0  0.17 -0.03
 15.17 12.67 45.65  -0.4 -0.02  0.28
 -0.33     0  -0.4 13.13  0.34  0.12
 -0.59  0.17 -0.02  0.34 16.15 -0.18
  0.95 -0.03  0.28  0.12 -0.18 13.19
 
CReussEpidote = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation: *10^-3
 43.69 12.79 15.43 -0.37 -0.52  0.92
 12.79 35.77 13.14 -0.02  0.27  0.01
 15.43 13.14 42.89 -0.39  0.17  0.23
 -0.37 -0.02 -0.39 11.46  0.37   0.1
 -0.52  0.27  0.17  0.37 14.74 -0.16
  0.92  0.01  0.23   0.1 -0.16 11.53
 
CHillEpidote = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation: *10^-3
 45.15 12.64  15.3 -0.35 -0.55  0.93
 12.64 37.55 12.91 -0.01  0.22 -0.01
  15.3 12.91 44.27  -0.4  0.08  0.25
 -0.35 -0.01  -0.4  12.3  0.36  0.11
 -0.55  0.22  0.08  0.36 15.44 -0.17
  0.93 -0.01  0.25  0.11 -0.17 12.36
</pre><h2 id="7">ODF Estimation</h2><p>Next, we estimate an ODF for the Epidote phase</p><pre class="codeinput">odfEpidote = calcODF(ebsd(<span class="string">'Epidote'</span>).orientations,<span class="string">'halfwidth'</span>,10*degree)
</pre><pre class="codeoutput"> 
odfEpidote = ODF  
  crystal symmetry : Epidote (12/m1, X||a*, Y||b*, Z||c)
  specimen symmetry: 1
 
  Harmonic portion:
    degree: 25
    weight: 1
 
</pre><h2 id="8">The Average Tensor from an ODF</h2><p>The Voigt, Reuss, and Hill averages for the above ODF are computed by</p><pre class="codeinput">[CVoigtEpidote, CReussEpidote, CHillEpidote] =  <span class="keyword">...</span>
  calcTensor(odfEpidote,CEpidote)

<span class="comment">% set back the colormap</span>
setMTEXpref(<span class="string">'defaultColorMap'</span>,WhiteJetColorMap);
</pre><pre class="codeoutput"> 
CVoigtEpidote = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation:
 208.94  57.35  67.73  -1.31  -2.25   3.75
  57.35 177.36  57.99  -0.15   0.58   0.23
  67.73  57.99 204.96  -1.61  -0.18   1.08
  -1.31  -0.15  -1.61  60.13   1.37   0.37
  -2.25   0.58  -0.18   1.37  72.05  -0.66
   3.75   0.23   1.08   0.37  -0.66  60.49
 
CReussEpidote = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation:
 195.18  58.63  68.58  -1.49  -1.82   3.66
  58.63 161.47     60  -0.24   0.99    0.3
  68.58     60 192.09   -1.6   0.62   0.87
  -1.49  -0.24   -1.6   52.4   1.49   0.35
  -1.82   0.99   0.62   1.49  65.38  -0.57
   3.66    0.3   0.87   0.35  -0.57  52.74
 
CHillEpidote = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation:
 202.06  57.99  68.15   -1.4  -2.03    3.7
  57.99 169.42  58.99  -0.19   0.79   0.27
  68.15  58.99 198.53   -1.6   0.22   0.97
   -1.4  -0.19   -1.6  56.27   1.43   0.36
  -2.03   0.79   0.22   1.43  68.71  -0.62
    3.7   0.27   0.97   0.36  -0.62  56.61
</pre></div></body></html>