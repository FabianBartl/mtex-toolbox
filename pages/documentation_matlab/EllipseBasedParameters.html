---
title: Ellipse Based Shape Parameters
last_updated: 03-Oct-2020
sidebar: documentation_sidebar
permalink: EllipseBasedParameters.html
folder: documentation
toc: false
---
    <html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Ellipse Based Shape Parameters</title><meta name="generator" content="MATLAB 9.9"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-10-03"><meta name="DC.source" content="script_EllipseBasedParameters.m"></head><body><font size="2"><a href="https://github.com/mtex-toolbox/mtex/blob/develop/doc/Grains/EllipseBasedParameters.m">
    edit page</a></font><div><!--introduction--><!--/introduction--><p>In this section we discuss geometric properties of grains that are related to ellipses fitted to the grains. Additionally to the orientation <code class="language-plaintext highlighter-rouge">omega</code>, and the lengths <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">b</code> of the long axis and short axes that are computed by the command <a href="grain2d.fitEllipse.html"><code class="language-plaintext highlighter-rouge">[omega,a,b] = grains.fitEllipse</code></a>  the following properties based on the fitted ellipses are avaiable.</p><p>
   <table class="usertable">
      <tr>
         <td>
               <p>
                  <a href="grain2d.longAxis.html">
                     <tt>longAxis</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>long axis as <a href="vector3d.vector3d.html">vector3d</a>
               </p>
         </td>
         <td>
               <p>
                  <a href="grain2d.shortAxis.html">
                     <tt>shortAxis</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>short axis as <a href="vector3d.vector3d.html">vector3d</a>
               </p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.centroid.html">
                     <tt>centroid</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>midpoint</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.aspectRatio.html">
                     <tt>aspectRatio</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>long axis / short axis</p>
         </td>
      </tr>
   </table>
</p><p>In order to demonstrate these properties we start by reconstructing the grain structure from a sample EBSD data set.</p>
{% highlight matlab %}
% load sample EBSD data set
mtexdata forsterite silent

% restrict it to a subregion of interest.
ebsd = ebsd(inpolygon(ebsd,[5 2 10 5]*10^3));

% reconstruct grains and smooth them
[grains, ebsd.grainId] = calcGrains(ebsd('indexed'),'angle',5*degree);
grains = smooth(grains,5);

% plot the orientation data of the Forsterite phase
plot(ebsd('fo'),ebsd('fo').orientations)

% plot the grain boundary on top of it
hold on
plot(grains.boundary,'lineWidth',2)
hold off
{% endhighlight %}
<center>
{% include inline_image.html file="EllipseBasedParameters_01.png" %}
</center><h2 id="2">Fit Ellipses</h2><p>The basic command for fitting ellipses is <a href="grain2d.fitEllipse"><code class="language-plaintext highlighter-rouge">fitEllipse</code></a></p>
{% highlight matlab %}
[omega,a,b] = grains.fitEllipse;
plot(grains,'linewidth',4,'micronbar','off')
plotEllipse(grains.centroid,a,b,omega,'lineColor','w','linewidth',2)
{% endhighlight %}
<center>
{% include inline_image.html file="EllipseBasedParameters_02.png" %}
</center><p>The returned variable <code class="language-plaintext highlighter-rouge">omega</code> is the angle describing the rotation of the ellipses and <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code> are the length of the longest and shortest half axis. The midpoints of the ellipses can be computed by the command <a href="grain2d.centroid.html"><code class="language-plaintext highlighter-rouge">grains.centroid</code></a>.  Note, that the ellipses are scaled such that the area of the ellipse coincides with the actual grain area. Alternatively, one can also scale the ellipse to fit the boundary length by using the option <code class="language-plaintext highlighter-rouge">boundary</code>.</p><h2 id="4">Long and Short Axes</h2><p>The direction of the long and the short axis of the fitted ellipse can be obtained by the comands <a href="grain2d.longAxis.html"><code class="language-plaintext highlighter-rouge">grains.longAxis</code></a> and <a href="grain2d.shortAxis.html"><code class="language-plaintext highlighter-rouge">grains.shortAxis</code></a>. These directions are only well defined if the fitted ellipse is not to close to a perfect circle. A measure for how distinct the ellipse is from a perfect circle is the <a href="grain2d.aspectRatio.html">aspect ratio</a> which is defined as the quotient \(a/b\) between the longest and the shortest axis. For a perfect circle the apect ratio is \(1\) and increases to infinity when the ellipse becomes more and more elongated.</p><p>Lets colorize the grains by their apect ratio and plot on top the long axis directions:</p>
{% highlight matlab %}
% visualize the aspect ratio
plot(grains,grains.aspectRatio,'linewidth',4,'micronbar','off')
setColorRange([0,4])
mtexColorbar('title','aspect ratio')

% and on top the long axes
hold on
quiver(grains,grains.longAxis,'Color','white')
hold off
{% endhighlight %}
<center>
{% include inline_image.html file="EllipseBasedParameters_03.png" %}
</center></div></body></html>