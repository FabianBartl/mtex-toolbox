---
title: Tilt and Twist Boundaries
last_updated: 05-Oct-2019
sidebar: documentation_sidebar
permalink: TiltAndTwistBoundaries.html
folder: documentation
toc: false
---

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Tilt and Twist Boundaries</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-10-05"><meta name="DC.source" content="script_TiltAndTwistBoundaries.m"></head><body><font size="2"><a href="#" data-toggle="tooltip" data-original-title="To edit this page type edit TiltAndTwistBoundaries into the Matlab commandline">edit page</a></font><div><!--introduction--><!--/introduction--><h2 id="1">Theory</h2><p>If a material deforms through the movement of dislocations, re- arrangement of dislocationsto a low-energy configuration may happen during deformation (i.e. in slow, geologic deformation) or or afterwards (in many metals). In any case, the arrangement of dislocation walls can lead to so-called subgrains boundaries. If such a boundary is composed of edge dislocations, it is called a tilt boundary and the rotation axis relating both parts of the grain at each side can be expected to be within the boudnary plane (ideally parallel to the edge dislocation line). If the boundary is composed of screw dislocations, the rotation axis should be normal to the boundary. Between those end-members, there are general boundaries where the rotation axis is not easily realted to the type of dislocations unless further information is available.</p><h2 id="2">Data import and grain detection</h2><p>Lets start by loading an MTEX standard data set, reconstuct grains and grain boundaries</p><pre class="codeinput"><span class="comment">% import data</span>
mtexdata <span class="string">forsterite</span>

<span class="comment">% reconstruct grains</span>
[grains, ebsd.grainId] = calcGrains(ebsd);
ebsd = ebsd(grains(grains.grainSize&gt;10));
[grains, ebsd.grainId, ebsd.mis2mean] = calcGrains(ebsd);

<span class="comment">% smooth grain boundaries to avoid stair casing effect</span>
grains = smooth(grains,5)

<span class="comment">% consider only the very big grains</span>
grains = grains(grains.grainSize&gt;300,<span class="string">'fo'</span>);
</pre><pre class="codeoutput"> 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     0   58485 (24%)  notIndexed                                                 
     1  152345 (62%)  Forsterite  LightSkyBlue       mmm                         
     2   26058 (11%)   Enstatite  DarkSeaGreen       mmm                         
     3   9064 (3.7%)    Diopside     Goldenrod     12/m1       X||a*, Y||b*, Z||c
 
 Properties: bands, bc, bs, error, mad, x, y
 Scan unit : um
 
 
grains = grain2d  
 
 Phase  Grains  Pixels     Mineral  Symmetry  Crystal reference frame
     0     461   29269  notIndexed                                   
     1     480  145310  Forsterite       mmm                         
     2     192   22804   Enstatite       mmm                         
     3     109    6219    Diopside     12/m1       X||a*, Y||b*, Z||c
 
 boundary segments: 49750
 triple points: 2000
 
 Properties: GOS, meanRotation
 
</pre><p>Colorize the orientations according to their misorientation axis / angle with respect to the grains mean orientation</p><pre class="codeinput"><span class="comment">% sett the color key</span>
colorKey = axisAngleColorKey(ebsd(<span class="string">'f'</span>).CS);

<span class="comment">% set reference orientation to be the grain mean orientation</span>
colorKey.oriRef = grains{ebsd(grains).grainId}.meanOrientation;

<span class="comment">% plot orientations according to this color key</span>
plot(ebsd(grains),colorKey.orientation2color(ebsd(grains).orientations),<span class="string">'micronbar'</span>,<span class="string">'off'</span>)

<span class="comment">% plot grain boundaries</span>
hold <span class="string">on</span>
plot(grains(<span class="string">'f'</span>).boundary,<span class="string">'lineWidth'</span>,2)

<span class="comment">% plot grain index</span>
text(grains(<span class="string">'f'</span>),arrayfun(@num2str,1:length(grains),<span class="string">'uniformOutput'</span>,false),<span class="string">'FontSize'</span>,18)


<span class="comment">% mark one specific grain</span>
ind = 73;
plot(grains(ind).boundary,<span class="string">'lineColor'</span>,<span class="string">'red'</span>,<span class="string">'lineWidth'</span>,3)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_01.png" %}
<p>Lets restrict ourself to one specific grain and investigate its microtexture in more detail.</p><pre class="codeinput"><span class="comment">% restrict the</span>
ebsd = ebsd(grains(ind));
<span class="comment">%ebsd = ebsd(ebsd.inpolygon([3000,8500,2700,-3100]));</span>

<span class="comment">% and denoise a little and fill</span>
f = halfQuadraticFilter;
f.alpha =0.05;
f.threshold=1.5*degree;

ebsd = smooth(ebsd,f,grains,<span class="string">'fill'</span>);
ebsd = ebsd(<span class="string">'indexed'</span>)
</pre><pre class="codeoutput"> 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     1   3153 (100%)  Forsterite  LightSkyBlue       mmm                         
 
 Properties: bands, bc, bs, error, mad, x, y, grainId, mis2mean
 Scan unit : um
 
</pre><pre class="codeinput">colorKey.oriRef = mean(ebsd.orientations);
plot(ebsd,colorKey.orientation2color(ebsd.orientations),<span class="string">'micronbar'</span>,<span class="string">'off'</span>)

<span class="comment">% plot grain boundaries</span>
hold <span class="string">on</span>
plot(grains(ind).boundary,<span class="string">'lineWidth'</span>,2)
hold <span class="string">off</span>
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_02.png" %}
<h2 id="6">Low angle subgrain boundaries</h2><p>Since we want to investiage the microtexture of the low angle boundaries, let's segment at a small angle</p><pre class="codeinput">[grains, ebsd.grainId,ebsd.mis2mean] = calcGrains(ebsd,<span class="string">'angle'</span>,1.5*degree,<span class="string">'boundary'</span>,<span class="string">'tight'</span>)

grains = smooth(grains,5)

<span class="comment">% gather all subgrain boundaries</span>
gbfo = [grains.boundary(<span class="string">'f'</span>,<span class="string">'f'</span>) grains.innerBoundary(<span class="string">'f'</span>,<span class="string">'f'</span>)];

<span class="comment">% colorize orientation according to their misorientation to the meanorientation</span>
plot(ebsd,colorKey.orientation2color(ebsd.orientations),<span class="string">'micronbar'</span>,<span class="string">'off'</span>)
hold <span class="string">on</span>

<span class="comment">% colorize subgrain boundaries according to their misorientation angle</span>
plot(gbfo,gbfo.misorientation.angle./degree,<span class="string">'lineWidth'</span>,6)
plot(grains.boundary(<span class="string">'notIndexed'</span>),<span class="string">'lineWidth'</span>,3)
hold <span class="string">off</span>
mtexColorbar(<span class="string">'Title'</span>,<span class="string">'Misorientation angle [\circ]'</span>,<span class="string">'locacation'</span>,<span class="string">'southoutside'</span>)
mtexColorMap <span class="string">blue2red</span>
</pre><pre class="codeoutput"> 
grains = grain2d  
 
 Phase  Grains  Pixels     Mineral  Symmetry  Crystal reference frame
     1      17    3153  Forsterite       mmm                         
 
 boundary segments: 547
 triple points: 12
 
 Id   Phase   Pixels          GOS   phi1   Phi   phi2
  1       1        1            0     11    45    284
  2       1        7   0.00246017     10    43    283
  3       1        1            0     13    48    281
  4       1        1            0     13    49    283
  5       1        1            0     12    42    280
  6       1        1            0     11    41    281
  7       1        2            0     13    40    281
  8       1        1            0     13    39    281
  9       1        1            0     16    45    277
 10       1        1            0     12    41    280
 11       1        1            0     15    44    277
 12       1       91     0.002762     16    47    275
 13       1        1            0     11    37    283
 14       1     1737    0.0256539     13    46    282
 15       1        1            0     12    39    284
 16       1      278   0.00491479     11    40    285
 17       1     1027    0.0287614     13    43    280
 
 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     1   3153 (100%)  Forsterite  LightSkyBlue       mmm                         
 
 Properties: bands, bc, bs, error, mad, x, y, grainId, mis2mean
 Scan unit : um
 
 
ebsd = EBSD  
 
 Phase  Orientations     Mineral         Color  Symmetry  Crystal reference frame
     1   3153 (100%)  Forsterite  LightSkyBlue       mmm                         
 
 Properties: bands, bc, bs, error, mad, x, y, grainId, mis2mean
 Scan unit : um
 
 
grains = grain2d  
 
 Phase  Grains  Pixels     Mineral  Symmetry  Crystal reference frame
     1      17    3153  Forsterite       mmm                         
 
 boundary segments: 547
 triple points: 12
 
 Id   Phase   Pixels          GOS   phi1   Phi   phi2
  1       1        1            0     11    45    284
  2       1        7   0.00246017     10    43    283
  3       1        1            0     13    48    281
  4       1        1            0     13    49    283
  5       1        1            0     12    42    280
  6       1        1            0     11    41    281
  7       1        2            0     13    40    281
  8       1        1            0     13    39    281
  9       1        1            0     16    45    277
 10       1        1            0     12    41    280
 11       1        1            0     15    44    277
 12       1       91     0.002762     16    47    275
 13       1        1            0     11    37    283
 14       1     1737    0.0256539     13    46    282
 15       1        1            0     12    39    284
 16       1      278   0.00491479     11    40    285
 17       1     1027    0.0287614     13    43    280
 
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_03.png" %}
<h2 id="7">The misorientation axes in crystal coordinats</h2><p>Our next goal is to investiage the misorientation axes at the subgrain boundaries. Lets start by plotting them with respect to the crystal coordinate system while colorizing them according to the misorientation angle.</p><pre class="codeinput">plot(gbfo.misorientation.axis,gbfo.misorientation.angle./degree,<span class="keyword">...</span>
  <span class="string">'fundamentalRegion'</span>,<span class="string">'MarkerEdgeColor'</span>,<span class="string">'k'</span>)
mtexColorMap <span class="string">white2black</span>
mtexColorbar(<span class="string">'Title'</span>,<span class="string">'Misorientation angle [\circ]'</span>,<span class="string">'locacation'</span>,<span class="string">'southoutside'</span>)
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_04.png" %}
<p>We observe that the misorientation axes have a strong tendency to be perpendicular to [100].</p><h2 id="9">The misorientation axis in specimen coordinats</h2><p>The computation of the misorientation axis in specimen coordinates is a little bit more complicated as it is impossible using only the misorientions. In fact we require the adjecent orientations on both sides of the subgrain boundaries. We can find those by the command</p><pre class="codeinput">ori_boundary = ebsd(<span class="string">'id'</span>,gbfo.ebsdId).orientations
</pre><pre class="codeoutput"> 
ori_boundary = orientation  
  size: 273 x 2
  crystal symmetry : Forsterite (mmm)
  specimen symmetry: 1
 
</pre><p>which results in a Nx2 matrix of orientations with rows corresponding to the boundary segments and the two columns to the both sides of the boundary. The misorientation axis in specimen coordinates is now computed by</p><pre class="codeinput">axS = axis(ori_boundary(:,1),ori_boundary(:,2),<span class="string">'antipodal'</span>)
</pre><pre class="codeoutput"> 
axS = vector3d  
 size: 273 x 1
 antipodal: true
</pre><p>and we may visualize them in a spherical plot using</p><pre class="codeinput">plot(axS,gbfo.misorientation.angle./degree,<span class="string">'upper'</span>,<span class="string">'MarkerEdgeColor'</span>,<span class="string">'k'</span>,<span class="string">'MarkerSize'</span>,10)
mtexColorMap <span class="string">white2black</span>
mtexColorbar(<span class="string">'Title'</span>,<span class="string">'Misorientation angle [\circ]'</span>,<span class="string">'locacation'</span>,<span class="string">'southoutside'</span>)
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_05.png" %}
<h2 id="12">Colorize low angle boundaries by misorientation axes</h2><pre class="codeinput"><span class="comment">% First, we plot some crytsal directions of the grain in a pole figure</span>
<span class="comment">% so we understand the orientation of the grain a little better</span>
close <span class="string">all</span>
h = Miller({1,0,0},{0,1,0},{0,0,1},ebsd.CS);
ori = ebsd.orientations;
plotPDF(ori,colorKey.orientation2color(ori),h,<span class="string">'MarkerSize'</span>,5)
</pre><pre class="codeoutput">  I'm plotting 1250 random orientations out of 3153 given orientations
  You can specify the the number points by the option "points".
  The option "all" ensures that all data are plotted
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_06.png" %}
<p>now we plot the grain with subboundaries color coded with the direction mapping according to the misorientation axes in crystal coordinates</p><pre class="codeinput">plot(ebsd,colorKey.orientation2color(ori),<span class="string">'faceAlpha'</span>,0.3)
hold <span class="string">on</span>
axisKey = HSVDirectionKey(ori.CS);
color = axisKey.direction2color(gbfo.misorientation.axis);
plot(gbfo,<span class="string">'linewidth'</span>,6)
plot(gbfo,color,<span class="string">'linewidth'</span>,4)
hold <span class="string">off</span>
mtexTitle(<span class="string">'misor crystal'</span>)
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_07.png" %}
<p>Next we plot the grain with subboundaries colorcoded with the direction mapping according to the misorientation axes in specimen coordinates</p><pre class="codeinput">plot(ebsd,colorKey.orientation2color(ori),<span class="string">'faceAlpha'</span>,0.3)
hold <span class="string">on</span>
axisKey = HSVDirectionKey;
color = axisKey.direction2color(axS);
plot(gbfo,<span class="string">'linewidth'</span>,6)
plot(gbfo,color,<span class="string">'linewidth'</span>,4)
hold <span class="string">off</span>
mtexTitle(<span class="string">'misor specimen'</span>)
</pre>
  {% include inline_image.html file="TiltAndTwistBoundaries_08.png" %}
</div></body></html>