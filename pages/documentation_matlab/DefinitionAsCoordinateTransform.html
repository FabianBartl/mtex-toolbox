---
title: Crystal Orientation as Coordinate Transformation

sidebar: documentation_sidebar
permalink: DefinitionAsCoordinateTransform.html
folder: documentation
toc: false
---
    <html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Crystal Orientation as Coordinate Transformation</title><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.source" content="script_DefinitionAsCoordinateTransform.m"></head><body><font size="2"><a href="https://github.com/mtex-toolbox/mtex/blob/develop/doc/CrystalOrientations/DefinitionAsCoordinateTransform.m">
    edit page</a></font><div><!--introduction--><!--/introduction--><p>In MTEX a crystal orientation is defined as the rotation that transforms <a href="CrystalDirections.html">crystal coordinates</a>, i.e., a description of a vector or a tensor with respect to the <a href="CrystalReferenceSystem.html">crystal reference frame</a>, into specimen coordinates, i.e., a desciption of the same object with respect to a specimen fixed reference frame.</p><p>In MTEX any orientation consists of two incredients. A <a href="rotation.rotation.html">rotation</a></p>
{% highlight matlab %}
% lets take a random one
rot = rotation.rand
{% endhighlight %}

{% highlight plaintext %}
rot = rotation
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  96.2088 127.407 184.897       0
{% endhighlight %}
<p>and a description of the crystal lattice, which are represented in MTEX by variables of type <a href="crystalSymmetry.crystalSymmetry.html">crystalSymmetry</a></p>
{% highlight matlab %}
% lets take cubic crystal symmetry
cs = crystalSymmetry.load("Al-Aluminum.cif")
{% endhighlight %}

{% highlight plaintext %}
cs = crystalSymmetry
 
  mineral : Aluminum
  symmetry: m-3m    
  elements: 48      
  a, b, c : 4, 4, 4
{% endhighlight %}
<p>Combining both incredients allows us to define an orientation</p>
{% highlight matlab %}
ori = orientation(rot,cs)
{% endhighlight %}

{% highlight plaintext %}
ori = orientation (Aluminum → xyz)
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  96.2088 127.407 184.897       0
{% endhighlight %}
<p>As a consequence a variable of type orientation is at the same time of type <a href="rotation.rotation.html">rotation</a> and hence allows for all <a href="RotationOperations.html">operations</a> that are available for rotations.</p><h2 id="5">Crystal coordinates to specimen coordinates</h2><p>Let us consider to following direction with respect to the crystal reference system</p>
{% highlight matlab %}
h = Miller(1,0,0,cs,'uvw')
{% endhighlight %}

{% highlight plaintext %}
h = Miller (Aluminum)
  u v w
  1 0 0
{% endhighlight %}
<p>Then in a grain with orientation <code class="language-plaintext highlighter-rouge">ori</code> this direction <code class="language-plaintext highlighter-rouge">h</code> has with respect to the specimen reference system the coordinates</p>
{% highlight matlab %}
r = ori * h
{% endhighlight %}

{% highlight plaintext %}
r = vector3d
         x        y        z
  0.227594 -4.03384 -0.27461
{% endhighlight %}
<p>Similarly, orientations transform tensors given with respect to the crystal reference frame, e.g., the following single crystal stiffness tensor</p>
{% highlight matlab %}
C = stiffnessTensor(...
  [[2 1 1 0 0 0];...
  [1 2 1 0 0 0];...
  [1 1 2 0 0 0];...
  [0 0 0 1 0 0];...
  [0 0 0 0 1 0];...
  [0 0 0 0 0 1]],cs)
{% endhighlight %}

{% highlight plaintext %}
C = stiffnessTensor (Aluminum)
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation:
 2 1 1 0 0 0
 1 2 1 0 0 0
 1 1 2 0 0 0
 0 0 0 1 0 0
 0 0 0 0 1 0
 0 0 0 0 0 1
{% endhighlight %}
<p>into a stiffness tensor with respect to the specimen reference frame</p>
{% highlight matlab %}
ori * C
{% endhighlight %}

{% highlight plaintext %}
ans = stiffnessTensor (xyz)
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation:
  2.4718  0.9921  0.5361  0.0381  0.1187 -0.0377
  0.9921  2.0154  0.9925 -0.0666  0.0071  0.0551
  0.5361  0.9925  2.4715  0.0286 -0.1258 -0.0174
  0.0381 -0.0666  0.0286  0.9925 -0.0174  0.0071
  0.1187  0.0071 -0.1258 -0.0174  0.5361  0.0381
 -0.0377  0.0551 -0.0174  0.0071  0.0381  0.9921
{% endhighlight %}
<p>Objects that can be translated by orientations from crystal into specimen cooordinates and vice verca include</p><div><ul><li><a href="Miller.Miller.html">crystal directions</a></li><li><a href="tensor.tensor.html">tensors</a></li><li><a href="slipSystem.slipSystem.html">slip systems</a></li><li><a href="twinningSystem.twinningSystem.html">twinning systems</a></li><li><a href="dislocationSystem.dislocationSystem.html">dislocation systems</a></li><li><a href="crystalShape.crystalShape.html">crystal shapes</a></li></ul></div><h2 id="10">Specimen coordinates into crystal coordinates</h2><p>Conversely, we can go back from specimen coordinates to crystal coordinates by multiplying with the inverse orientation</p>
{% highlight matlab %}
inv(ori) * r
{% endhighlight %}

{% highlight plaintext %}
ans = Miller (Aluminum)
        h       k       l
  16.3991       0       0
{% endhighlight %}
<p>Note, that in literature orientations are often defined to transform specimen coordinates into crystal coordinates, i.e., to coincide with the inverse orientations in MTEX. The consequences of this differences are exhaustivly discussed in the topic <a href="MTEXvsBungeConvention.html">orientation convemtions</a>.</p><h2 id="12">Specimen Rotation</h2><p>Rotations of the specimen ,i.e., changing the specimen reference frame, do also change the orientation. Assume the specimen is rotated about the X-axis about 60 degree. We may define this rotation by</p>
{% highlight matlab %}
rot = rotation.byAxisAngle(vector3d.X,60*degree);
{% endhighlight %}
<p>Then an orientation <code class="language-plaintext highlighter-rouge">ori</code> is updated to the rotated reference frame by</p>
{% highlight matlab %}
ori_new = rot * ori
{% endhighlight %}

{% highlight plaintext %}
ori_new = orientation (Aluminum → xyz)
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  125.777 103.258  247.09       0
{% endhighlight %}
<p>It should also be noted, that orientations are sensitiv with respect to the alignment of the Euclidean reference frame \(\vec X\), \(\vec Y\), \(\vec Z\) with respect to the crystal axes \(\vec a\), \(\vec b\) and \(\vec c\). This issue is discussed in more detail in the topic <a href="CrystalReferenceSystem.html">The crystal reference system</a>.</p></div></body></html>