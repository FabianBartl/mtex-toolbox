---
title: Crystal Orientation as Coordinate Transformation
last_updated: 07-Nov-2019
sidebar: documentation_sidebar
permalink: DefinitionAsCoordinateTransform.html
folder: documentation
toc: false
---
    <html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Crystal Orientation as Coordinate Transformation</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-11-07"><meta name="DC.source" content="script_DefinitionAsCoordinateTransform.m"></head><body><font size="2"><a href="https://github.com/mtex-toolbox/mtex/blob/develop/doc/CrystalOrientations/DefinitionAsCoordinateTransform.m">
    edit page</a></font><div><!--introduction--><!--/introduction--><p>In MTEX a crystal orientation is defined as the rotation that transforms <a href="CrystalDirections.html">crystal coordinates</a>, i.e., a description of a vector or a tensor with respect to the <a href="CrystalReferenceSystem.html">crystal reference frame</a>, into specimen coordinates, i.e., a desciption of the same object with respect to a specimen fixed reference frame.</p><p>In MTEX any orientation consists of two incredients. A <a href="rotation.rotation.html">rotation</a></p>
{% highlight matlab %}
% lets take a random one
rot = rotation.rand
{% endhighlight %}

{% highlight plaintext %}
rot = rotation  
  size: 1 x 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  12.7788 132.729 156.028       0'
{% endhighlight %}
<p>and a description of the crystal lattice, which are represented in MTEX by variables of type <a href="crystalSymmetry.crystalSymmetry.html">crystalSymmetry</a></p>
{% highlight matlab %}
% lets take cubic crystal symmetry
cs = crystalSymmetry('cubic')
{% endhighlight %}

{% highlight plaintext %}
cs = crystalSymmetry  
 
  symmetry: m-3m   
  a, b, c : 1, 1, 1'
{% endhighlight %}
<p>Combining both incredients allows us to define an orientation</p>
{% highlight matlab %}
ori = orientation(rot,cs)
{% endhighlight %}

{% highlight plaintext %}
ori = orientation  
  size: 1 x 1
  crystal symmetry : m-3m
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  12.7788 132.729 156.028       0'
{% endhighlight %}
<p>As a consequence a variable of type orientation is at the same time of type <a href="rotation.rotation.html">rotation</a> and hence allows for all <a href="RotationOperations.html">operations</a> that are available for rotations.</p><h2 id="5">Crystal coordinates to specimen coordinates</h2><p>Let us consider to following direction with respect to the crystal reference system</p>
{% highlight matlab %}
h = Miller(1,0,0,cs,'uvw')
{% endhighlight %}

{% highlight plaintext %}
h = Miller  
 size: 1 x 1
 symmetry: m-3m
  u 1
  v 0
  w 0'
{% endhighlight %}
<p>Then in a grain with orientation <code class="language-plaintext highlighter-rouge">ori</code> this direction <code class="language-plaintext highlighter-rouge">h</code> has with respect to the specimen reference system the coordinates</p>
{% highlight matlab %}
r = ori * h
{% endhighlight %}

{% highlight plaintext %}
r = vector3d  
 size: 1 x 1
          x         y         z
  -0.830132 -0.470966   0.29845'
{% endhighlight %}
<p>Similarly, orientations transform tensors given with respect to the crystal reference frame, e.g., the following single crystal stiffness tensor</p>
{% highlight matlab %}
C = stiffnessTensor(...
  [[2 1 1 0 0 0];...
  [1 2 1 0 0 0];...
  [1 1 2 0 0 0];...
  [0 0 0 1 0 0];...
  [0 0 0 0 1 0];...
  [0 0 0 0 0 1]],cs)
{% endhighlight %}

{% highlight plaintext %}
C = stiffnessTensor  
  unit   : GPa              
  rank   : 4 (3 x 3 x 3 x 3)
  mineral: m-3m             
 
  tensor in Voigt matrix representation:
 2 1 1 0 0 0
 1 2 1 0 0 0
 1 1 2 0 0 0
 0 0 0 1 0 0
 0 0 0 0 1 0
 0 0 0 0 0 1'
{% endhighlight %}
<p>into a stiffness tensor with respect to the specimen reference frame</p>
{% highlight matlab %}
ori * C
{% endhighlight %}

{% highlight plaintext %}
ans = stiffnessTensor  
  unit: GPa              
  rank: 4 (3 x 3 x 3 x 3)
 
  tensor in Voigt matrix representation:
  2.4435  0.7582  0.7983  0.1823  0.0718 -0.1882
  0.7582  2.6172  0.6246 -0.1267  0.0167  0.0458
  0.7983  0.6246  2.5771 -0.0556 -0.0885  0.1425
  0.1823 -0.1267 -0.0556  0.6246  0.1425  0.0167
  0.0718  0.0167 -0.0885  0.1425  0.7983  0.1823
 -0.1882  0.0458  0.1425  0.0167  0.1823  0.7582'
{% endhighlight %}
<p>Objects that can be translated by orientations from crystal into specimen cooordinates and vice verca include</p><div><ul><li><a href="Miller.Miller.html">crystal directions</a></li><li><a href="tensor.tensor.html">tensors</a></li><li><a href="slipSystem.slipSystem.html">slip systems</a></li><li><a href="twinningSystem.twinningSystem.html">twinning systems</a></li><li><a href="dislocationSystem.dislocationSystem.html">dislocation systems</a></li><li><a href="crystalShape.crystalShape.html">crystal shapes</a></li></ul></div><h2 id="10">Specimen coordinates into crystal coordinates</h2><p>Conversely, we can go back from specimen coordinates to crystal coordinates by multiplying with the inverse orientation</p>
{% highlight matlab %}
inv(ori) * r
{% endhighlight %}

{% highlight plaintext %}
ans = Miller  
 size: 1 x 1
 symmetry: m-3m
  h 1
  k 0
  l 0'
{% endhighlight %}
<p>Note, that in literature orientations are often defined to transform specimen coordinates into crystal coordinates, i.e., to coincide with the inverse orientations in MTEX. The consequences of this differences are exhaustivly discussed in the topic <a href="MTEXvsBungeConvention.html">orientation convemtions</a>.</p><h2 id="12">Specimen Rotation</h2><p>Rotations of the specimen ,i.e., changing the specimen reference frame, do also change the orientation. Assume the specimen is rotated about the X-axis about 60 degree. We may define this rotation by</p>
{% highlight matlab %}
rot = rotation.byAxisAngle(vector3d.X,60*degree);
{% endhighlight %}
<p>Then an orientation <code class="language-plaintext highlighter-rouge">ori</code> is updated to the rotated reference frame by</p>
{% highlight matlab %}
ori_new = rot * ori
{% endhighlight %}

{% highlight plaintext %}
ori_new = orientation  
  size: 1 x 1
  crystal symmetry : m-3m
  specimen symmetry: 1
 
  Bunge Euler angles in degree
     phi1     Phi    phi2    Inv.
  144.697 163.671  293.08       0'
{% endhighlight %}
<p>It should also be noted, that orientations are sensitiv with respect to the alignment of the Euclidean reference frame \(\vec X\), \(\vec Y\), \(\vec Z\) with respect to the crystal axes \(\vec a\), \(\vec b\) and \(\vec c\). This issue is discussed in more detail in the topic <a href="CrystalReferenceSystem.html">The crystal reference system</a>.</p></div></body></html>